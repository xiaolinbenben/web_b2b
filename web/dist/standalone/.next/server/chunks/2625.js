"use strict";exports.id=2625,exports.ids=[2625],exports.modules={12625:(e,s,t)=>{t.d(s,{Z:()=>f});var a=t(10326),l=t(59076),i=t(17577),n=t(36498),r=t(92121),o=t(30462),c=t(16039),d=t(19817);t(58575);var p=t(64697),x=t(25690),u=t(86812),m=t(72380),h=t(4324),g=t(20797);let v=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)}),_=({maxCount:e,maxSize:s,accept:t,imageList:l,onImageUploadChange:r})=>{let[o,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)(""),[x,u]=(0,i.useState)(l),[_,j]=(0,i.useState)("");(0,i.useEffect)(()=>{u(l),localStorage.getItem("admintoken")&&j(localStorage.getItem("admintoken"))},[l]);let w=async e=>{e.url||e.preview||(e.preview=await v(e.originFileObj)),p(e.url||e.preview),c(!0)},f=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[a.jsx(m.Z,{}),a.jsx("div",{style:{marginTop:8}})]}),y={name:"my-file",action:process.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadLogoImg",headers:{admintoken:_}};return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[a.jsx(h.Z,{accept:t,listType:"picture-card",fileList:x,onPreview:w,onChange:({file:e,fileList:s})=>{u(s),"error"===e.status&&n.ZP.error("上传失败");let t=[];s.forEach(e=>{e.success&&t.push(e.name),e.response&&(0===e.response.code?t.push(e.response.data):1===e.response.code&&(n.ZP.error("上传失败："+e.response.msg),e.status="error"))}),r(t)},maxCount:e,...y,children:x?.length>=e?null:f}),d&&a.jsx(g.Z,{wrapperStyle:{display:"none"},preview:{visible:o,onVisibleChange:e=>c(e),afterOpenChange:e=>!e&&p("")},src:d})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",s,"MB以内，最多",e,"张图片"]})]})})},j=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)}),w=({maxCount:e,maxSize:s,accept:t,imageList:l,onImageUploadChange:r})=>{let[o,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)(""),[x,u]=(0,i.useState)(l),[v,_]=(0,i.useState)("");(0,i.useEffect)(()=>{u(l),localStorage.getItem("admintoken")&&_(localStorage.getItem("admintoken"))},[l]);let w=async e=>{e.url||e.preview||(e.preview=await j(e.originFileObj)),p(e.url||e.preview),c(!0)},f=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[a.jsx(m.Z,{}),a.jsx("div",{style:{marginTop:8}})]}),y={name:"my-file",action:process.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadIcoImg",headers:{admintoken:v}};return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[a.jsx(h.Z,{accept:t,listType:"picture-card",fileList:x,onPreview:w,onChange:({file:e,fileList:s})=>{u(s),"error"===e.status&&n.ZP.error("上传失败");let t=[];s.forEach(e=>{e.success&&t.push(e.name),e.response&&(0===e.response.code?t.push(e.response.data):1===e.response.code&&(n.ZP.error("上传失败："+e.response.msg),e.status="error"))}),r(t)},maxCount:e,...y,children:x?.length>=e?null:f}),d&&a.jsx(g.Z,{wrapperStyle:{display:"none"},preview:{visible:o,onVisibleChange:e=>c(e),afterOpenChange:e=>!e&&p("")},src:d})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",s,"MB以内，最多",e,"张图片"]})]})})},f=()=>{let[e,s]=(0,i.useState)({}),[t,m]=(0,i.useState)(!1),[h,g]=(0,i.useState)([]),[v,j]=(0,i.useState)([]),f=async()=>{try{m(!0);let{code:e,msg:t,data:a}=await x.Z.get("/myapp/admin/basicSite/list");0===e?(s(a),y(a)):n.ZP.error(t||"网络异常"),m(!1)}catch(e){n.ZP.error("网络异常"),m(!1)}};(0,i.useEffect)(()=>{f()},[]);let y=e=>{e?.site_logo?.length>0?g(e?.site_logo?.split("#").map(e=>({success:!0,name:e,status:"done",url:process.env.NEXT_PUBLIC_BASE_URL+"/upload/img/"+e}))):g([]),e?.site_ico?.length>0?j(e?.site_ico?.split("#").map(e=>({success:!0,name:e,status:"done",url:process.env.NEXT_PUBLIC_BASE_URL+"/upload/img/"+e}))):j([])},Z=(e,t)=>{s(s=>({...s,[e]:t}))},b=(e,t)=>{s(s=>({...s,[e]:t}))},N=(e,t)=>{let a=e&&e.length>0?e.join("#"):null;s(e=>({...e,[t]:a}))},S=async()=>{try{let s=new FormData;s.append("status",e.status||"1"),s.append("site_name",e.site_name||""),s.append("site_nickname",e.site_nickname||""),s.append("site_logo",e.site_logo||""),s.append("site_ico",e.site_ico||""),s.append("site_address",e.site_address||""),s.append("site_copyright",e.site_copyright||""),s.append("site_code",e.site_code||""),s.append("site_gaid",e.site_gaid||""),s.append("site_switch_product",e.site_switch_product||"1"),s.append("site_switch_about",e.site_switch_about||"1"),s.append("site_switch_contact",e.site_switch_contact||"1"),s.append("site_switch_news",e.site_switch_news||"1"),s.append("site_switch_case",e.site_switch_case||"1"),s.append("site_switch_faq",e.site_switch_faq||"1"),s.append("site_switch_download",e.site_switch_download||"1");let{code:t,msg:a,data:l}=await x.Z.post("/myapp/admin/basicSite/update",s);0===t?(n.ZP.success("操作成功"),f()):n.ZP.error(a||"网络异常")}catch(e){}};return a.jsx(a.Fragment,{children:a.jsx(r.Z,{spinning:t,children:(0,a.jsxs)("div",{className:"px-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 py-6",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[a.jsx(l.Z,{title:"网站状态"}),a.jsx(o.ZP.Group,{onChange:e=>b("status",e.target.value),value:e.status,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(l.Z,{title:"网站名称"}),a.jsx(c.Z,{placeholder:"请输入网站名称",value:e.site_name,onChange:e=>Z("site_name",e.target.value),style:{width:300}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(l.Z,{title:"网站Logo"}),a.jsx(_,{maxCount:1,maxSize:2,accept:"image/png",imageList:h,onImageUploadChange:e=>N(e,"site_logo")})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(l.Z,{title:"ico图标"}),a.jsx(w,{maxCount:1,maxSize:1,accept:"image/x-icon",imageList:v,onImageUploadChange:e=>N(e,"site_ico")})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(l.Z,{title:"网站网址"}),a.jsx(c.Z,{placeholder:"请输入网站网址",value:e.site_address,onChange:e=>Z("site_address",e.target.value),style:{width:300}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(l.Z,{title:"谷歌gaId"}),a.jsx(c.Z,{placeholder:"请输入",value:e.site_gaid,onChange:e=>Z("site_gaid",e.target.value),style:{width:300}})]})]}),a.jsx(u.Z,{title:"功能菜单"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 px-2  py-6",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"产品"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_product",e.target.value),value:e.site_switch_product,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"关于"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_about",e.target.value),value:e.site_switch_about,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"联系"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_contact",e.target.value),value:e.site_switch_contact,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"新闻"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_news",e.target.value),value:e.site_switch_news,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"案例"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_case",e.target.value),value:e.site_switch_case,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"下载"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_download",e.target.value),value:e.site_switch_download,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[a.jsx(l.Z,{title:"Faq"}),a.jsx(o.ZP.Group,{onChange:e=>b("site_switch_faq",e.target.value),value:e.site_switch_faq,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]})]}),a.jsx(p.iz,{}),a.jsx("div",{className:"pb-6 flex flex-row gap-4 justify-start",children:a.jsx(d.ZP,{type:"primary",onClick:S,children:"提交"})})]})})})}},59076:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(10326);t(17577);let l=({title:e,required:s,labelWidth:t=80})=>(0,a.jsxs)("span",{className:"text-[14px] text-[#777] h-[30px] leading-[30px] flex flex-row items-center",style:{width:`${t}px`},children:[(0,a.jsxs)("div",{children:[e," "]}),a.jsx("div",{className:"flex flex-col items-center mx-1",children:s?a.jsx("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})},86812:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(10326);t(17577);let l=({title:e,required:s})=>(0,a.jsxs)("span",{className:"bg-gray-100 text-[13px] w-full text-gray-700 px-3 h-[36px] leading-[36px] flex flex-row items-center",children:[a.jsx("div",{children:e}),a.jsx("div",{className:"flex flex-col items-center mx-1",children:s?a.jsx("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})},58575:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(10326),l=t(17577),i=t(72380),n=t(36498),r=t(4324),o=t(20797);let c=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)}),d=({maxCount:e,maxSize:s,accept:t,imageList:d,onImageUploadChange:p})=>{let[x,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(""),[g,v]=(0,l.useState)(d),[_,j]=(0,l.useState)("");(0,l.useEffect)(()=>{v(d),localStorage.getItem("admintoken")&&j(localStorage.getItem("admintoken"))},[d]);let w=async e=>{e.url||e.preview||(e.preview=await c(e.originFileObj)),h(e.url||e.preview),u(!0)},f=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[a.jsx(i.Z,{}),a.jsx("div",{style:{marginTop:8}})]}),y={name:"my-file",action:process.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadImg",headers:{admintoken:_}};return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[a.jsx(r.Z,{accept:t,listType:"picture-card",fileList:g,onPreview:w,onChange:({file:e,fileList:s})=>{v(s),"error"===e.status&&n.ZP.error("上传失败");let t=[];s.forEach(e=>{e.success&&t.push(e.name),e.response&&(0===e.response.code?t.push(e.response.data):1===e.response.code&&(n.ZP.error("上传失败："+e.response.msg),e.status="error"))}),p(t)},maxCount:e,...y,children:g?.length>=e?null:f}),m&&a.jsx(o.Z,{wrapperStyle:{display:"none"},preview:{visible:x,onVisibleChange:e=>u(e),afterOpenChange:e=>!e&&h("")},src:m})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",s,"MB以内，最多",e,"张图片"]})]})})}}};