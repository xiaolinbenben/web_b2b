(()=>{var e={};e.id=2632,e.ids=[2632],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},2958:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o}),r(92604),r(8518),r(37505),r(35866);var t=r(23191),a=r(88716),i=r(37922),l=r.n(i),n=r(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let o=["",{children:["(admin)",{children:["admin",{children:["user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92604)),"/app/src/app/(admin)/admin/user/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8518)),"/app/src/app/(admin)/admin/layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,37505)),"/app/src/app/(admin)/layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/src/app/(admin)/admin/user/page.jsx"],p="/(admin)/admin/user/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(admin)/admin/user/page",pathname:"/admin/user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},42690:(e,s,r)=>{Promise.resolve().then(r.bind(r,64769))},64769:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>P});var t=r(10326),a=r(17577),i=r(33325),l=r(25690);r(13949);var n=r(3204),d=r(74543),o=r(36498),c=r(92121),p=r(19817),x=r(13240),u=r(25842),m=r(77814),h=r(16039),j=r(91259),w=r(276),f=r(59076);let g=({isOpen:e,onRequestClose:s,initialItem:r})=>{let[i,n]=(0,a.useState)(r||{}),[d,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n(r||{}),n(e=>({...e,password:""}))},[r]);let u=(e,s)=>{n(r=>({...r,[e]:s}))},g=(e,s)=>{n(r=>({...r,[e]:s}))},v=async()=>{try{let e=new FormData;i.id&&e.append("id",i.id),i.username||o.ZP.error("用户名不能为空"),i.password||o.ZP.error("密码不能为空"),i.role||o.ZP.error("角色不能为空"),e.append("username",i.username||""),e.append("password",i.password||""),e.append("role",i.role||""),x(!0);let{code:r,msg:t,data:a}=await l.Z.post("/myapp/admin/user/create",e);0===r?(o.ZP.success("操作成功"),s(!0)):o.ZP.error(t||"网络异常"),x(!1)}catch(e){x(!1)}};return t.jsx(m.Z,{title:"新增",centered:!0,open:e,onCancel:()=>s(!1),footer:null,width:600,children:t.jsx(c.Z,{spinning:d,tip:"",children:t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"",children:(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-4 pb-0",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"用户名",required:!0}),t.jsx(h.Z,{placeholder:"请输入",value:i.username,onChange:e=>u("username",e.target.value),style:{width:400}})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"密码",required:!0}),t.jsx(h.Z.Password,{placeholder:"请输入",value:i.password,onChange:e=>u("password",e.target.value),style:{width:400}})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"角色",required:!0}),t.jsx(j.Z,{placeholder:"请选择角色",value:i.role,style:{width:200},onChange:e=>g("role",e),options:[{value:"1",label:"管理员"},{value:"3",label:"演示员"}]})]})]}),t.jsx(w.Z,{}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 justify-start",children:[t.jsx(p.ZP,{type:"primary",onClick:v,children:"提交"}),t.jsx(p.ZP,{onClick:()=>s(!1),children:"取消"})]})]})})})})})},v=({isOpen:e,onRequestClose:s,initialItem:r})=>{let[i,n]=(0,a.useState)(r||{}),[d,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n(r||{}),n(e=>({...e,password:""}))},[r]);let u=(e,s)=>{n(r=>({...r,[e]:s}))},j=async()=>{try{let e=new FormData;if(i.id&&e.append("id",i.id),!i.password||!i.newPassword1||!i.newPassword2){o.ZP.error("不能为空");return}e.append("password",i.password||""),e.append("newPassword1",i.newPassword1||""),e.append("newPassword2",i.newPassword2||""),x(!0);let{code:r,msg:t,data:a}=await l.Z.post("/myapp/admin/user/updatePwd",e);0===r?(o.ZP.success("操作成功"),s(!0)):o.ZP.error(t||"网络异常"),x(!1)}catch(e){x(!1)}};return t.jsx(m.Z,{title:"修改密码",centered:!0,open:e,onCancel:()=>s(!1),footer:null,width:600,children:t.jsx(c.Z,{spinning:d,tip:"",children:t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"",children:(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-4 pb-0",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"用户名",required:!0}),t.jsx(h.Z,{placeholder:"请输入",value:i.username,disabled:!0,onChange:e=>u("username",e.target.value),style:{width:400}})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"原密码",required:!0}),t.jsx(h.Z.Password,{placeholder:"请输入",value:i.password,onChange:e=>u("password",e.target.value),style:{width:400}})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"新密码",required:!0}),t.jsx(h.Z.Password,{placeholder:"请输入",value:i.newPassword1,onChange:e=>u("newPassword1",e.target.value),style:{width:400}})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[t.jsx(f.Z,{title:"确认密码",required:!0}),t.jsx(h.Z.Password,{placeholder:"请输入",value:i.newPassword2,onChange:e=>u("newPassword2",e.target.value),style:{width:400}})]})]}),t.jsx(w.Z,{}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 justify-start",children:[t.jsx(p.ZP,{type:"primary",onClick:j,children:"提交"}),t.jsx(p.ZP,{onClick:()=>s(!1),children:"取消"})]})]})})})})})};function y(){(0,u.v9)(e=>e.adminSetting),(0,u.I0)();let[e,s]=(0,a.useState)(!1),r=async()=>{try{s(!0);let{code:e,data:r}=await l.Z.get("/myapp/admin/user/list");0===e?m(r):o.ZP.error("数据获取失败"),s(!1)}catch(e){}},[i,m]=(0,a.useState)([]),[h,j]=(0,a.useState)(!1),[w,f]=(0,a.useState)(!1),[y,P]=(0,a.useState)(null),Z=e=>{j(!0),P(e)},q=e=>{f(!0),P(e)},N=async e=>{try{let{code:s,msg:t,data:a}=await l.Z.post("/myapp/admin/user/delete",{id:e.id});0===s?(o.ZP.success("删除成功"),r()):o.ZP.error(t||"删除失败")}catch(e){}};return(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"bg-white",children:t.jsx("div",{children:t.jsx(c.Z,{spinning:e,tip:"",children:(0,t.jsxs)("div",{className:"px-4 py-4 flex flex-col gap-4",children:[t.jsx("div",{className:"flex flex-row gap-4",children:t.jsx(p.ZP,{type:"primary",onClick:()=>Z({sort:0}),children:"新增"})}),t.jsx(x.Z,{columns:[{title:"ID",dataIndex:"id",key:"id",width:"90px",textWrap:"word-break",ellipsis:!0,render:e=>t.jsx("div",{children:e})},{title:"账号",dataIndex:"username",key:"username",width:"220px",textWrap:"word-break",ellipsis:!0},{title:"角色",dataIndex:"role",key:"role",render:e=>t.jsx("div",{children:"1"===e?"管理员":"演示账号"})},{title:"操作",key:"action",fixed:"right",align:"center",width:"180px",textWrap:"word-break",ellipsis:!0,render:(e,s)=>(0,t.jsxs)(n.Z,{size:"middle",children:[t.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>q(s),children:"修改密码"}),t.jsx(d.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>N(s),children:t.jsx("a",{className:"text-adminPrimaryColor",children:"删除"})})]})}],dataSource:i,size:"middle",rowKey:e=>e.id,pagination:!1})]})})})}),t.jsx(g,{isOpen:h,onRequestClose:e=>{j(!1),P(null),e&&r()},initialItem:y}),t.jsx(v,{isOpen:w,onRequestClose:e=>{f(!1),P(null),e&&r()},initialItem:y})]})}function P(){let e=[{key:"1",label:"账号管理",children:t.jsx(y,{})}];return t.jsx(t.Fragment,{children:t.jsx("div",{className:"bg-gray-100 px-4 py-4",children:t.jsx("div",{className:"",children:t.jsx(i.Z,{indicator:{size:e=>24,align:"center"},tabBarStyle:{paddingLeft:"20px",outline:"none",fontWeight:"400"},className:"bg-white custom-tab",defaultActiveKey:"1",items:e,onChange:e=>{}})})})})}},13949:(e,s,r)=>{"use strict";r(10326),r(17577),r(59076),r(25690),(0,r(33265).default)(async()=>{},{loadableGenerated:{modules:["components/admin/faq/faqModal.jsx -> /src/components/admin/wangEditor.jsx"]},ssr:!1})},59076:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});var t=r(10326);r(17577);let a=({title:e,required:s,labelWidth:r=80})=>(0,t.jsxs)("span",{className:"text-[14px] text-[#777] h-[30px] leading-[30px] flex flex-row items-center",style:{width:`${r}px`},children:[(0,t.jsxs)("div",{children:[e," "]}),t.jsx("div",{className:"flex flex-col items-center mx-1",children:s?t.jsx("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})},92604:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/app/src/app/(admin)/admin/user/page.jsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[5819,555,280,9921,8365,6498,9376,6742,5899,6039,5782,7832,4605,8147],()=>r(2958));module.exports=t})();