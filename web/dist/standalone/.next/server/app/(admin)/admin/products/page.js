(()=>{var e={};e.id=7578,e.ids=[7578],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},62570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(70414),r(8518),r(37505),r(35866);var a=r(23191),n=r(88716),i=r(37922),l=r.n(i),s=r(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let d=["",{children:["(admin)",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70414)),"/app/src/app/(admin)/admin/products/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8518)),"/app/src/app/(admin)/admin/layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,37505)),"/app/src/app/(admin)/layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/src/app/(admin)/admin/products/page.jsx"],p="/(admin)/admin/products/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(admin)/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},41869:(e,t,r)=>{Promise.resolve().then(r.bind(r,91519))},91519:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eO});var a=r(10326),n=r(17577),i=r.n(n),l=r(90434),s=r(3204),o=r(74543),d=r(36498),c=r(92121),p=r(19817),u=r(13240),x=r(14125),h=r(52401),m=r(25690),g=r(77814),f=r(16039),w=r(48029),j=r.n(w),b=r(34053),y=r(56212),v=r(72304),$=r(72270),S=r(39026),Z=r(57019),C=r(85190),N=r(8120),k=r(69814),O=r(86285),P=r(80695),I=r(79377),E=r(37465),R=r(45157),_=r(13017),W=r(17365),q=r(29741),z=r(48228),H=r(13299),T=r(37723),L=r(10087),A=r(45162),F=r(24021),B=r(83022),M=r(62780);let D=e=>{let{componentCls:t,treePrefixCls:r,colorBgElevated:a}=e,n=`.${r}`;return[{[`${t}-dropdown`]:[{padding:`${(0,L.unit)(e.paddingXS)} ${(0,L.unit)(e.calc(e.paddingXS).div(2).equal())}`},(0,M.Yk)(r,(0,F.mergeToken)(e,{colorBgContainer:a}),!1),{[n]:{borderRadius:0,[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-treenode`]:{[`${n}-node-content-wrapper`]:{flex:"auto"}}}}},(0,A.C2)(`${r}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${n}-switcher${n}-switcher_close`]:{[`${n}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};var G=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let V=n.forwardRef((e,t)=>{var r;let a;let{prefixCls:i,size:l,disabled:s,bordered:o=!0,className:d,rootClassName:c,treeCheckable:p,multiple:u,listHeight:x=256,listItemHeight:h,placement:m,notFoundContent:g,switcherIcon:f,treeLine:w,getPopupContainer:S,popupClassName:L,dropdownClassName:A,treeIcon:V=!1,transitionName:U,choiceTransitionName:X="",status:K,treeExpandAction:Y,builtinPlacements:J,dropdownMatchSelectWidth:Q,popupMatchSelectWidth:ee,allowClear:et,variant:er,dropdownStyle:ea,tagRender:en,maxCount:ei,showCheckedStrategy:el,treeCheckStrictly:es}=e,eo=G(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:ed,getPrefixCls:ec,renderEmpty:ep,direction:eu,virtual:ex,popupMatchSelectWidth:eh,popupOverflow:em}=n.useContext(C.E_),[,eg]=(0,H.ZP)(),ef=null!=h?h:(null==eg?void 0:eg.controlHeightSM)+(null==eg?void 0:eg.paddingXXS),ew=ec(),ej=ec("select",i),eb=ec("select-tree",i),ey=ec("tree-select",i),{compactSize:ev,compactItemClassnames:e$}=(0,z.ri)(ej,eu),eS=(0,O.Z)(ej),eZ=(0,O.Z)(ey),[eC,eN,ek]=(0,_.Z)(ej,eS),[eO]=(0,B.I$)("TreeSelect",e=>[D((0,F.mergeToken)(e,{treePrefixCls:eb}))],M.TM)(ey,eZ),[eP,eI]=(0,E.Z)("treeSelect",er,o),eE=j()(L||A,`${ey}-dropdown`,{[`${ey}-dropdown-rtl`]:"rtl"===eu},c,ek,eS,eZ,eN),eR=!!(p||u),e_=n.useMemo(()=>{if(!ei||("SHOW_ALL"!==el||es)&&"SHOW_PARENT"!==el)return ei},[ei,el,es]),eW=(0,q.Z)(e.suffixIcon,e.showArrow),eq=null!==(r=null!=ee?ee:Q)&&void 0!==r?r:eh,{status:ez,hasFeedback:eH,isFormItemInput:eT,feedbackIcon:eL}=n.useContext(I.aM),eA=(0,Z.F)(ez,K),{suffixIcon:eF,removeIcon:eB,clearIcon:eM}=(0,W.Z)(Object.assign(Object.assign({},eo),{multiple:eR,showSuffixIcon:eW,hasFeedback:eH,feedbackIcon:eL,prefixCls:ej,componentName:"TreeSelect"}));a=void 0!==g?g:(null==ep?void 0:ep("Select"))||n.createElement(N.Z,{componentName:"Select"});let eD=(0,y.Z)(eo,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),eG=n.useMemo(()=>void 0!==m?m:"rtl"===eu?"bottomRight":"bottomLeft",[m,eu]),eV=(0,P.Z)(e=>{var t;return null!==(t=null!=l?l:ev)&&void 0!==t?t:e}),eU=n.useContext(k.Z),eX=j()(!i&&ey,{[`${ej}-lg`]:"large"===eV,[`${ej}-sm`]:"small"===eV,[`${ej}-rtl`]:"rtl"===eu,[`${ej}-${eP}`]:eI,[`${ej}-in-form-item`]:eT},(0,Z.Z)(ej,eA,eH),e$,d,c,ek,eS,eZ,eN),[eK]=(0,v.Cn)("SelectLike",null==ea?void 0:ea.zIndex);return eC(eO(n.createElement(b.default,Object.assign({virtual:ex,disabled:null!=s?s:eU},eD,{dropdownMatchSelectWidth:eq,builtinPlacements:(0,R.Z)(J,em),ref:t,prefixCls:ej,className:eX,listHeight:x,listItemHeight:ef,treeCheckable:p?n.createElement("span",{className:`${ej}-tree-checkbox-inner`}):p,treeLine:!!w,suffixIcon:eF,multiple:eR,placement:eG,removeIcon:eB,allowClear:!0===et?{clearIcon:eM}:et,switcherIcon:e=>n.createElement(T.Z,{prefixCls:eb,switcherIcon:f,treeNodeProps:e,showLine:w}),showTreeIcon:V,notFoundContent:a,getPopupContainer:S||ed,treeMotion:null,dropdownClassName:eE,dropdownStyle:Object.assign(Object.assign({},ea),{zIndex:eK}),choiceTransitionName:(0,$.m)(ew,"",X),transitionName:(0,$.m)(ew,"slide-up",U),treeExpandAction:Y,tagRender:eR?en:void 0,maxCount:e_,showCheckedStrategy:el,treeCheckStrictly:es}))))}),U=(0,S.Z)(V,"dropdownAlign",e=>(0,y.Z)(e,["visible"]));V.TreeNode=b.TreeNode,V.SHOW_ALL=b.SHOW_ALL,V.SHOW_PARENT=b.SHOW_PARENT,V.SHOW_CHILD=b.SHOW_CHILD,V._InternalPanelDoNotUseOrYouWillBeFired=U;var X=r(91259),K=r(276),Y=r(40240),J=r(59076),Q=r(58575),ee=r(12341),et=r(33265);let er=i().forwardRef(({properties:e,handlePropertyChange:t},r)=>{let[i,l]=(0,n.useState)([]);(0,n.useEffect)(()=>{e&&e.length>0?l(JSON.parse(e)):l([])},[e]);let s=(e,r,a)=>{let n=[...i];n[e][r]=a,l(n),t(n)},o=()=>{for(let e of i)if(!e.name||!e.value)return!1;return!0};(0,n.useImperativeHandle)(r,()=>({handleCheckSubmit:o}));let d=e=>{let r=i.filter((t,r)=>r!==e);l(r),t(r)};return(0,a.jsxs)("div",{children:[a.jsx("ul",{children:i?.map((e,t)=>a.jsxs("li",{style:{marginBottom:"16px"},children:[a.jsx(f.Z,{type:"text",placeholder:"属性名",style:{width:"200px"},value:e.name,onChange:e=>s(t,"name",e.target.value)})," \xa0 : \xa0",a.jsx(f.Z,{type:"text",placeholder:"属性值",style:{width:"200px"},value:e.value,onChange:e=>s(t,"value",e.target.value)}),a.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>d(t),style:{width:"80px",lineHeight:"32px",textAlign:"center",marginLeft:"16px"},children:"删除"})]},t))}),a.jsx(p.ZP,{onClick:()=>{l([...i,{name:"",value:""}])},children:"添加属性"})]})});er.displayName="PropertyPanel";let ea=r(30124).Z.Group,en=(0,et.default)(async()=>{},{loadableGenerated:{modules:["components/admin/product/productModal.jsx -> /src/components/admin/wangEditor.jsx"]},ssr:!1}),ei=({isOpen:e,onRequestClose:t,initialItem:r})=>{let[l,s]=(0,n.useState)(r||{}),[o,c]=(0,n.useState)(!1),u=i().useRef(null),[x,h]=(0,n.useState)([]),[w,j]=(0,n.useState)([]),b=(0,n.useRef)(null),[y,v]=(0,n.useState)([]),$=(e,t)=>{v(t);let r=t.join(",");s(t=>({...t,[e]:r}))},S=async()=>{try{let{code:e,msg:t,data:r}=await m.Z.get("/myapp/admin/category/list");0===e?h(r):d.ZP.error(t||"网络异常")}catch(e){}};(0,n.useEffect)(()=>{let e=setTimeout(()=>{r?.cover?.length>0?j(r?.cover?.split("#").map(e=>({success:!0,name:e,status:"done",url:"https://shop.beisi.tech"+"/upload/img/"+e}))):j([]),r?.dimension?.length>0?v(r?.dimension?.split(",")):v([]),s(r||{}),u.current&&(u.current.scrollTop=0),S()},100);return()=>{clearTimeout(e)}},[r]);let Z=()=>{C()},C=async()=>{if(!l.title){d.ZP.error("请输入名称");return}if(!l.category){d.ZP.error("请选择分类");return}if(!l.cover){d.ZP.error("请上传图片");return}if(!b.current.handleCheckSubmit()){d.ZP.error("参数不能留空");return}try{c(!0);let e=l.id?"/myapp/admin/thing/update":"/myapp/admin/thing/create",r=new FormData;l.id&&r.append("id",l.id),r.append("title",l.title||""),r.append("category",l.category),r.append("summary",l.summary||""),r.append("price",l.price||""),r.append("dimension",l.dimension||""),r.append("cover",l.cover||""),r.append("description",l.description||""),r.append("seo_title",l.seo_title||""),r.append("seo_description",l.seo_description||""),r.append("seo_keywords",l.seo_keywords||""),r.append("properties",l.properties||""),r.append("status",l.status||"0");let{code:a,msg:n,data:i}=await m.Z.post(e,r);0===a?(d.ZP.success("操作成功"),t(!0)):d.ZP.error(n||"网络异常"),c(!1)}catch(e){c(!1)}},N=(e,t)=>{s(r=>({...r,[e]:t}))},k=(e,t)=>{s(r=>({...r,[e]:t}))},O=(e,t)=>{s(r=>({...r,[e]:t}))};return a.jsx(g.Z,{title:l.id?"编辑":"新增",centered:!0,open:e,onCancel:()=>t(!1),footer:null,width:1100,styles:{mask:{backdropFilter:"blur(10px)"}},children:a.jsx("div",{className:"flex flex-col",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{ref:u,className:"max-h-[75vh] overflow-y-auto",children:[a.jsx(Y.Z,{title:"基本信息"}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 px-2 py-2",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"名称",required:!0}),a.jsx(f.Z,{placeholder:"请输入产品名称",value:l.title,onChange:e=>N("title",e.target.value),maxLength:100,style:{width:300}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"分类",required:!0}),a.jsx(V,{dropdownStyle:{maxHeight:300,overflow:"auto",minWidth:300},style:{width:300},placeholder:"请选择",value:l.category,placement:"bottomLeft",allowClear:!0,fieldNames:{label:"title",value:"id",children:"children"},onChange:e=>O("category",e),treeData:x})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[a.jsx(J.Z,{title:"产品维度"}),a.jsx(ea,{options:[{label:"推荐",value:"Recommend"},{label:"精选",value:"Feature"}],value:y,onChange:e=>$("dimension",e)})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[a.jsx(J.Z,{title:"价格"}),a.jsx(f.Z,{placeholder:"选填",value:l.price,onChange:e=>N("price",e.target.value),style:{width:300}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"摘要",required:!0}),a.jsx(ee.Z,{placeholder:"请输入产品摘要",autoSize:{minRows:3,maxRows:6},showCount:!0,maxLength:500,value:l.summary,onChange:e=>N("summary",e.target.value),style:{width:600}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 min-h-[100px]",children:[a.jsx(J.Z,{title:"图片",required:!0}),a.jsx(Q.Z,{maxCount:5,maxSize:5,accept:"image/*",imageList:w,onImageUploadChange:e=>{let t=e&&e.length>0?e.join("#"):null;s(e=>({...e,cover:t}))}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"是否启用"}),a.jsx(X.Z,{defaultValue:"0",placeholder:"请选择状态",value:l.status,style:{width:400},onChange:e=>k("status",e),options:[{value:"0",label:"是"},{value:"1",label:"否"}]})]})]}),a.jsx(K.Z,{}),a.jsx(Y.Z,{title:"产品详情"}),a.jsx("div",{className:"flex flex-col gap-4 px-2 py-2",children:a.jsx(en,{htmlText:l.description,onHtmlResult:e=>{s(t=>({...t,description:e}))}})}),a.jsx(K.Z,{}),a.jsx(Y.Z,{title:"产品参数"}),a.jsx("div",{className:"flex flex-col gap-4 px-2 py-2",children:a.jsx(er,{ref:b,properties:l.properties,handlePropertyChange:e=>{s(t=>({...t,properties:JSON.stringify(e||[])}))}})}),a.jsx(K.Z,{}),a.jsx(Y.Z,{title:"SEO优化"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 px-2 py-2",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"SEO标题"}),a.jsx(f.Z,{placeholder:"请输入SEO标题",value:l.seo_title,onChange:e=>N("seo_title",e.target.value),style:{width:600}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"SEO关键词"}),a.jsx(f.Z,{placeholder:"请输入SEO关键词",value:l.seo_keywords,onChange:e=>N("seo_keywords",e.target.value),style:{width:600}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"SEO描述"}),a.jsx(ee.Z,{placeholder:"请输入SEO描述",autoSize:{minRows:3,maxRows:6},showCount:!0,maxLength:200,value:l.seo_description,onChange:e=>N("seo_description",e.target.value),style:{width:600}})]})]})]}),a.jsx(K.Z,{}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(p.ZP,{loading:o,type:"primary",onClick:()=>Z(),children:"提交"}),a.jsx(p.ZP,{onClick:()=>t(!1),children:"取消"})]})]})})})};var el=r(35047);function es(){(0,el.useRouter)();let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)([]),[g,f]=(0,n.useState)(!1),[w,j]=(0,n.useState)(null),[b,y]=(0,n.useState)([]),[v,$]=(0,n.useState)(""),[S,Z]=(0,n.useState)(1),[C,N]=(0,n.useState)(10),[k,O]=(0,n.useState)(0),P=e=>{f(!0),j(e)},I=async e=>{try{let{code:t,data:a}=await m.Z.post("/myapp/admin/thing/delete",{ids:e.join(",")});0===t?(d.ZP.success("删除成功"),e.length===r.length&&S>1?Z(S-1):E(S,C)):d.ZP.error("删除失败")}catch(e){}},E=async(e,r)=>{try{t(!0);let{code:a,total:n,data:l}=await m.Z.get("/myapp/admin/thing/list",{params:{page:e,pageSize:r,keyword:v}});0===a?(i(l),O(n),Z(e),N(r)):d.ZP.error("数据获取失败"),t(!1)}catch(e){d.ZP.error("网络异常"),t(!1)}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{spinning:e,tip:"",children:(0,a.jsxs)("div",{className:"bg-white px-4 py-4 flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(p.ZP,{type:"primary",onClick:()=>P({status:"0"}),children:"新增产品"}),a.jsx(o.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>I(b),children:a.jsx(p.ZP,{disabled:!b.length>0,children:"删除"})}),a.jsx(h.Z,{placeholder:"搜索产品",allowClear:!0,onSearch:(e,t,r)=>{Z(1),$(e||"")},style:{width:200,marginLeft:"auto"}})]}),(0,a.jsxs)("div",{className:"bg-white",children:[a.jsx(u.Z,{columns:[{title:"产品名称",dataIndex:"title",key:"title",width:"200px",textWrap:"word-break",ellipsis:!0},{title:"分类",dataIndex:"category_title",key:"category_title",width:"150px",textWrap:"word-break",ellipsis:!0},{title:"摘要",dataIndex:"summary",key:"summary",width:"280px",textWrap:"word-break",ellipsis:!0},{title:"是否启用",dataIndex:"status",key:"status",width:"90px",textWrap:"word-break",ellipsis:!0,render:e=>a.jsx("div",{children:"0"===e?"是":"否"})},{title:"创建时间",dataIndex:"create_time",key:"create_time",width:"150px",textWrap:"word-break",ellipsis:!0},{title:"操作",key:"action",fixed:"right",align:"center",width:"150px",textWrap:"word-break",ellipsis:!0,render:(e,t)=>(0,a.jsxs)(s.Z,{size:"middle",children:[a.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>P(t),children:"编辑"}),a.jsx(o.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>I([t.id]),children:a.jsx("a",{className:"text-adminPrimaryColor",children:"删除"})}),a.jsx(l.default,{className:"text-adminPrimaryColor",href:`/product/${t.id}`,target:"_blank",rel:"noopener noreferrer",children:"预览"})]})}],dataSource:r,size:"middle",rowSelection:{selectedRowKeys:b,onChange:e=>{y(e)}},rowKey:e=>e.id,pagination:!1,showSizeChanger:!1}),a.jsx("div",{className:"p-4",children:a.jsx(x.Z,{align:"end",current:S,pageSize:C,total:k,showTotal:e=>`共 ${e} 条`,onChange:(e,t)=>{Z(e),N(t)}})})]})]})}),a.jsx(ei,{isOpen:g,onRequestClose:e=>{f(!1),j(null),e&&E(S,C)},initialItem:w})]})}var eo=r(33325),ed=r(25842),ec=r(9078),ep=r(1901),eu=r(10183),ex=r(92790),eh=r(5410),em=r(86424),eg=r(92752),ef=r(35470),ew=r(53558),ej=r(64694),eb=r(40833);let ey=(e,t)=>{let{componentCls:r,borderRadiusSM:a,borderRadiusLG:n}=e,i="lg"===t?n:a;return{[`&-${t}`]:{[`${r}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${r}-handler-up`]:{borderStartEndRadius:i},[`${r}-handler-down`]:{borderEndEndRadius:i}}}},ev=e=>{let{componentCls:t,lineWidth:r,lineType:a,borderRadius:n,inputFontSizeSM:i,inputFontSizeLG:l,controlHeightLG:s,controlHeightSM:o,colorError:d,paddingInlineSM:c,paddingBlockSM:p,paddingBlockLG:u,paddingInlineLG:x,colorIcon:h,motionDurationMid:m,handleHoverColor:g,handleOpacity:f,paddingInline:w,paddingBlock:j,handleBg:b,handleActiveBg:y,colorTextDisabled:v,borderRadiusSM:$,borderRadiusLG:S,controlWidth:Z,handleBorderColor:C,filledHandleBg:N,lineHeightLG:k,calc:O}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,ew.Wf)(e)),(0,em.ik)(e)),{display:"inline-block",width:Z,margin:0,padding:0,borderRadius:n}),(0,ef.qG)(e,{[`${t}-handler-wrap`]:{background:b,[`${t}-handler-down`]:{borderBlockStart:`${(0,L.unit)(r)} ${a} ${C}`}}})),(0,ef.H8)(e,{[`${t}-handler-wrap`]:{background:N,[`${t}-handler-down`]:{borderBlockStart:`${(0,L.unit)(r)} ${a} ${C}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:b}}})),(0,ef.vc)(e,{[`${t}-handler-wrap`]:{background:b,[`${t}-handler-down`]:{borderBlockStart:`${(0,L.unit)(r)} ${a} ${C}`}}})),(0,ef.Mu)(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:l,lineHeight:k,borderRadius:S,[`input${t}-input`]:{height:O(s).sub(O(r).mul(2)).equal(),padding:`${(0,L.unit)(u)} ${(0,L.unit)(x)}`}},"&-sm":{padding:0,fontSize:i,borderRadius:$,[`input${t}-input`]:{height:O(o).sub(O(r).mul(2)).equal(),padding:`${(0,L.unit)(p)} ${(0,L.unit)(c)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:d}}},"&-group":Object.assign(Object.assign(Object.assign({},(0,ew.Wf)(e)),(0,em.s7)(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:S,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:$}}},(0,ef.ir)(e)),(0,ef.S5)(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},(0,ew.Wf)(e)),{width:"100%",padding:`${(0,L.unit)(j)} ${(0,L.unit)(w)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:n,outline:0,transition:`all ${m} linear`,appearance:"textfield",fontSize:"inherit"}),(0,em.nz)(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:f,height:"100%",borderStartStartRadius:0,borderStartEndRadius:n,borderEndEndRadius:n,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${m}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:h,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${(0,L.unit)(r)} ${a} ${C}`,transition:`all ${m} linear`,"&:active":{background:y},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:g}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},(0,ew.Ro)()),{color:h,transition:`all ${m} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:n},[`${t}-handler-down`]:{borderEndEndRadius:n}},ey(e,"lg")),ey(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:v}})}]},e$=e=>{let{componentCls:t,paddingBlock:r,paddingInline:a,inputAffixPadding:n,controlWidth:i,borderRadiusLG:l,borderRadiusSM:s,paddingInlineLG:o,paddingInlineSM:d,paddingBlockLG:c,paddingBlockSM:p,motionDurationMid:u}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${(0,L.unit)(r)} 0`}},(0,em.ik)(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:i,padding:0,paddingInlineStart:a,"&-lg":{borderRadius:l,paddingInlineStart:o,[`input${t}-input`]:{padding:`${(0,L.unit)(c)} 0`}},"&-sm":{borderRadius:s,paddingInlineStart:d,[`input${t}-input`]:{padding:`${(0,L.unit)(p)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:n},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:a,marginInlineStart:n,transition:`margin ${u}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(a).equal()}})}},eS=(0,B.I$)("InputNumber",e=>{let t=(0,F.mergeToken)(e,(0,eg.e)(e));return[ev(t),e$(t),(0,ej.c)(t)]},e=>{var t;let r=null!==(t=e.handleVisible)&&void 0!==t?t:"auto",a=e.controlHeightSM-2*e.lineWidth;return Object.assign(Object.assign({},(0,eg.T)(e)),{controlWidth:90,handleWidth:a,handleFontSize:e.fontSize/2,handleVisible:r,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new eb.FastColor(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:!0===r?1:0,handleVisibleWidth:!0===r?a:0})},{unitless:{handleOpacity:!0}});var eZ=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let eC=n.forwardRef((e,t)=>{let{getPrefixCls:r,direction:a}=n.useContext(C.E_),i=n.useRef(null);n.useImperativeHandle(t,()=>i.current);let{className:l,rootClassName:s,size:o,disabled:d,prefixCls:c,addonBefore:p,addonAfter:u,prefix:x,suffix:h,bordered:m,readOnly:g,status:f,controls:w,variant:b}=e,y=eZ(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),v=r("input-number",c),$=(0,O.Z)(v),[S,N,R]=eS(v,$),{compactSize:_,compactItemClassnames:W}=(0,z.ri)(v,a),q=n.createElement(ep.Z,{className:`${v}-handler-up-inner`}),H=n.createElement(ec.Z,{className:`${v}-handler-down-inner`});"object"==typeof w&&(q=void 0===w.upIcon?q:n.createElement("span",{className:`${v}-handler-up-inner`},w.upIcon),H=void 0===w.downIcon?H:n.createElement("span",{className:`${v}-handler-down-inner`},w.downIcon));let{hasFeedback:T,status:L,isFormItemInput:A,feedbackIcon:F}=n.useContext(I.aM),B=(0,Z.F)(L,f),M=(0,P.Z)(e=>{var t;return null!==(t=null!=o?o:_)&&void 0!==t?t:e}),D=n.useContext(k.Z),G=null!=d?d:D,[V,U]=(0,E.Z)("inputNumber",b,m),X=T&&n.createElement(n.Fragment,null,F),K=j()({[`${v}-lg`]:"large"===M,[`${v}-sm`]:"small"===M,[`${v}-rtl`]:"rtl"===a,[`${v}-in-form-item`]:A},N),Y=`${v}-group`;return S(n.createElement(eu.default,Object.assign({ref:i,disabled:G,className:j()(R,$,l,s,W),upHandler:q,downHandler:H,prefixCls:v,readOnly:g,controls:"boolean"==typeof w?w:void 0,prefix:x,suffix:X||h,addonBefore:p&&n.createElement(ex.Z,{form:!0,space:!0},p),addonAfter:u&&n.createElement(ex.Z,{form:!0,space:!0},u),classNames:{input:K,variant:j()({[`${v}-${V}`]:U},(0,Z.Z)(v,B,T)),affixWrapper:j()({[`${v}-affix-wrapper-sm`]:"small"===M,[`${v}-affix-wrapper-lg`]:"large"===M,[`${v}-affix-wrapper-rtl`]:"rtl"===a,[`${v}-affix-wrapper-without-controls`]:!1===w||G},N),wrapper:j()({[`${Y}-rtl`]:"rtl"===a},N),groupWrapper:j()({[`${v}-group-wrapper-sm`]:"small"===M,[`${v}-group-wrapper-lg`]:"large"===M,[`${v}-group-wrapper-rtl`]:"rtl"===a,[`${v}-group-wrapper-${V}`]:U},(0,Z.Z)(`${v}-group-wrapper`,B,T),N)}},y)))});eC._InternalPanelDoNotUseOrYouWillBeFired=e=>n.createElement(eh.ZP,{theme:{components:{InputNumber:{handleVisible:!0}}}},n.createElement(eC,Object.assign({},e)));let eN=({isOpen:e,onRequestClose:t,initialItem:r})=>{let[i,l]=(0,n.useState)(r||{}),[s,o]=(0,n.useState)([]),[u,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l(r||{}),r?.cover?.length>0?o(r?.cover?.split("#").map(e=>({success:!0,name:e,status:"done",url:"https://shop.beisi.tech"+"/upload/img/"+e}))):o([])},[r]);let h=(e,t)=>{l(r=>({...r,[e]:t}))},w=async()=>{if(!i.title){d.ZP.error("请输入分类名称");return}if(!i.cover){d.ZP.error("请上传封面图");return}try{x(!0);let e=i.id?"/myapp/admin/category/update":"/myapp/admin/category/create",r=new FormData;i.id&&r.append("id",i.id),i.cover&&r.append("cover",i.cover),r.append("pid",i.pid),r.append("title",i.title||""),r.append("sort",i.sort||0);let{code:a,msg:n,data:l}=await m.Z.post(e,r);0===a?(d.ZP.success("操作成功"),t(!0)):d.ZP.error(n||"网络异常"),x(!1)}catch(e){x(!1)}};return a.jsx(g.Z,{title:i.id?"编辑分类":"新增分类",centered:!0,open:e,onCancel:()=>t(!1),footer:null,width:600,children:a.jsx(c.Z,{spinning:u,tip:"",children:a.jsx("div",{className:"flex flex-col",children:a.jsx("div",{className:"",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-4 pb-0 overflow-y-auto max-h-[70vh]",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"分类名称",required:!0}),a.jsx(f.Z,{placeholder:"请输入分类名称",value:i.title,onChange:e=>h("title",e.target.value),style:{width:400}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"封面图",required:!0}),a.jsx(Q.Z,{maxCount:1,maxSize:2,accept:"image/*",imageList:s,onImageUploadChange:e=>{let t=e&&e.length>0?e.join("#"):null;l(e=>({...e,cover:t}))}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[a.jsx(J.Z,{title:"排序",required:!0}),a.jsx(eC,{placeholder:"请输入顺序号",value:i.sort,onChange:e=>h("sort",e),style:{width:400}})]})]}),a.jsx(K.Z,{}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 justify-start",children:[a.jsx(p.ZP,{type:"primary",onClick:w,children:"提交"}),a.jsx(p.ZP,{onClick:()=>t(!1),children:"取消"})]})]})})})})})};function ek(){(0,ed.v9)(e=>e.adminSetting),(0,ed.I0)();let[e,t]=(0,n.useState)(!1),r=async()=>{try{t(!0);let{code:e,data:r}=await m.Z.get("/myapp/admin/category/list");0===e?l(r):d.ZP.error("数据获取失败"),t(!1)}catch(e){}},[i,l]=(0,n.useState)([]),[x,h]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null),w=e=>{h(!0),f(e)},j=async e=>{try{let{code:t,data:a}=await m.Z.post("/myapp/admin/category/delete",{id:e.id});0===t?(d.ZP.success("删除成功"),r()):d.ZP.error("删除失败")}catch(e){}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{spinning:e,tip:"",children:(0,a.jsxs)("div",{className:"bg-white px-4 py-4 flex flex-col gap-4",children:[a.jsx("div",{className:"flex flex-row gap-4",children:a.jsx(p.ZP,{type:"primary",onClick:()=>w({sort:0,pid:-1}),children:"新增分类"})}),a.jsx(u.Z,{columns:[{title:"分类名称",dataIndex:"title",key:"title"},{title:"排序",dataIndex:"sort",key:"sort"},{title:"操作",key:"action",align:"left",width:"260px",render:(e,t)=>(0,a.jsxs)(s.Z,{size:"middle",children:[a.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>w(t),children:"编辑"}),-1===t.pid?a.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>w({sort:0,pid:t.id}),children:"添加子分类"}):null,a.jsx(o.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>j(t),children:a.jsx("a",{className:"text-adminPrimaryColor",children:"删除"})})]})}],dataSource:i,size:"middle",rowKey:e=>e.id,pagination:!1})]})}),a.jsx(eN,{isOpen:x,onRequestClose:e=>{h(!1),f(null),e&&r()},initialItem:g})]})}function eO(){let e=[{key:"1",label:"产品列表",children:a.jsx(es,{})},{key:"2",label:"产品分类",children:a.jsx(ek,{})}];return a.jsx(a.Fragment,{children:a.jsx("div",{className:"bg-gray-100 px-4 py-4",children:a.jsx("div",{className:"",children:a.jsx(eo.Z,{indicator:{size:e=>24,align:"center"},tabBarStyle:{paddingLeft:"20px",outline:"none",fontWeight:"400"},className:"bg-white custom-tab",defaultActiveKey:"1",items:e,onChange:e=>{}})})})})}},59076:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(10326);r(17577);let n=({title:e,required:t,labelWidth:r=80})=>(0,a.jsxs)("span",{className:"text-[14px] text-[#777] h-[30px] leading-[30px] flex flex-row items-center",style:{width:`${r}px`},children:[(0,a.jsxs)("div",{children:[e," "]}),a.jsx("div",{className:"flex flex-col items-center mx-1",children:t?a.jsx("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})},58575:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(10326),n=r(17577),i=r(72380),l=r(36498),s=r(4324),o=r(20797);let d=e=>new Promise((t,r)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>r(e)}),c=({maxCount:e,maxSize:t,accept:r,imageList:c,onImageUploadChange:p})=>{let[u,x]=(0,n.useState)(!1),[h,m]=(0,n.useState)(""),[g,f]=(0,n.useState)(c),[w,j]=(0,n.useState)("");(0,n.useEffect)(()=>{f(c),localStorage.getItem("admintoken")&&j(localStorage.getItem("admintoken"))},[c]);let b=async e=>{e.url||e.preview||(e.preview=await d(e.originFileObj)),m(e.url||e.preview),x(!0)},y=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[a.jsx(i.Z,{}),a.jsx("div",{style:{marginTop:8}})]});return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[a.jsx(s.Z,{accept:r,listType:"picture-card",fileList:g,onPreview:b,onChange:({file:e,fileList:t})=>{f(t),"error"===e.status&&l.ZP.error("上传失败");let r=[];t.forEach(e=>{e.success&&r.push(e.name),e.response&&(0===e.response.code?r.push(e.response.data):1===e.response.code&&(l.ZP.error("上传失败："+e.response.msg),e.status="error"))}),p(r)},maxCount:e,name:"my-file",action:"https://shop.beisi.tech/myapp/admin/cdn/uploadImg",headers:{admintoken:w},children:g?.length>=e?null:y}),h&&a.jsx(o.Z,{wrapperStyle:{display:"none"},preview:{visible:u,onVisibleChange:e=>x(e),afterOpenChange:e=>!e&&m("")},src:h})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",t,"MB以内，最多",e,"张图片"]})]})})}},40240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(10326);r(17577);let n=({title:e})=>a.jsx("div",{className:"font-bold text-[14px] px-2 my-2",children:e})},70414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/app/src/app/(admin)/admin/products/page.jsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5819,555,280,9921,8365,6498,9376,6742,5899,6039,5782,7832,6077,4605,2688,8147],()=>r(62570));module.exports=a})();