(()=>{var e={};e.id=7578,e.ids=[7578],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},62570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(70414),r(8518),r(37505),r(35866);var n=r(23191),a=r(88716),i=r(37922),l=r.n(i),s=r(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let d=["",{children:["(admin)",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70414)),"/app/src/app/(admin)/admin/products/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8518)),"/app/src/app/(admin)/admin/layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,37505)),"/app/src/app/(admin)/layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/src/app/(admin)/admin/products/page.jsx"],p="/(admin)/admin/products/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(admin)/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},41869:(e,t,r)=>{Promise.resolve().then(r.bind(r,91519))},91519:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ek});var n=r(10326),a=r(17577),i=r.n(a),l=r(90434),s=r(3204),o=r(74543),d=r(36498),c=r(92121),p=r(19817),u=r(13240),x=r(14125),m=r(52401),h=r(25690),g=r(77814),f=r(16039),w=r(48029),j=r.n(w),b=r(34053),y=r(56212),v=r(72304),$=r(72270),S=r(39026),Z=r(57019),C=r(85190),N=r(8120),P=r(69814),k=r(86285),O=r(80695),I=r(79377),E=r(37465),_=r(45157),R=r(13017),W=r(17365),q=r(29741),T=r(48228),L=r(13299),z=r(37723),H=r(10087),A=r(45162),B=r(24021),F=r(83022),M=r(62780);let U=e=>{let{componentCls:t,treePrefixCls:r,colorBgElevated:n}=e,a=`.${r}`;return[{[`${t}-dropdown`]:[{padding:`${(0,H.unit)(e.paddingXS)} ${(0,H.unit)(e.calc(e.paddingXS).div(2).equal())}`},(0,M.Yk)(r,(0,B.mergeToken)(e,{colorBgContainer:n}),!1),{[a]:{borderRadius:0,[`${a}-list-holder-inner`]:{alignItems:"stretch",[`${a}-treenode`]:{[`${a}-node-content-wrapper`]:{flex:"auto"}}}}},(0,A.C2)(`${r}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${a}-switcher${a}-switcher_close`]:{[`${a}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};var D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};let G=a.forwardRef((e,t)=>{var r;let n;let{prefixCls:i,size:l,disabled:s,bordered:o=!0,className:d,rootClassName:c,treeCheckable:p,multiple:u,listHeight:x=256,listItemHeight:m,placement:h,notFoundContent:g,switcherIcon:f,treeLine:w,getPopupContainer:S,popupClassName:H,dropdownClassName:A,treeIcon:G=!1,transitionName:X,choiceTransitionName:V="",status:K,treeExpandAction:Y,builtinPlacements:J,dropdownMatchSelectWidth:Q,popupMatchSelectWidth:ee,allowClear:et,variant:er,dropdownStyle:en,tagRender:ea,maxCount:ei,showCheckedStrategy:el,treeCheckStrictly:es}=e,eo=D(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:ed,getPrefixCls:ec,renderEmpty:ep,direction:eu,virtual:ex,popupMatchSelectWidth:em,popupOverflow:eh}=a.useContext(C.E_),[,eg]=(0,L.ZP)(),ef=null!=m?m:(null==eg?void 0:eg.controlHeightSM)+(null==eg?void 0:eg.paddingXXS),ew=ec(),ej=ec("select",i),eb=ec("select-tree",i),ey=ec("tree-select",i),{compactSize:ev,compactItemClassnames:e$}=(0,T.ri)(ej,eu),eS=(0,k.Z)(ej),eZ=(0,k.Z)(ey),[eC,eN,eP]=(0,R.Z)(ej,eS),[ek]=(0,F.I$)("TreeSelect",e=>[U((0,B.mergeToken)(e,{treePrefixCls:eb}))],M.TM)(ey,eZ),[eO,eI]=(0,E.Z)("treeSelect",er,o),eE=j()(H||A,`${ey}-dropdown`,{[`${ey}-dropdown-rtl`]:"rtl"===eu},c,eP,eS,eZ,eN),e_=!!(p||u),eR=a.useMemo(()=>{if(!ei||("SHOW_ALL"!==el||es)&&"SHOW_PARENT"!==el)return ei},[ei,el,es]),eW=(0,q.Z)(e.suffixIcon,e.showArrow),eq=null!==(r=null!=ee?ee:Q)&&void 0!==r?r:em,{status:eT,hasFeedback:eL,isFormItemInput:ez,feedbackIcon:eH}=a.useContext(I.aM),eA=(0,Z.F)(eT,K),{suffixIcon:eB,removeIcon:eF,clearIcon:eM}=(0,W.Z)(Object.assign(Object.assign({},eo),{multiple:e_,showSuffixIcon:eW,hasFeedback:eL,feedbackIcon:eH,prefixCls:ej,componentName:"TreeSelect"}));n=void 0!==g?g:(null==ep?void 0:ep("Select"))||a.createElement(N.Z,{componentName:"Select"});let eU=(0,y.Z)(eo,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),eD=a.useMemo(()=>void 0!==h?h:"rtl"===eu?"bottomRight":"bottomLeft",[h,eu]),eG=(0,O.Z)(e=>{var t;return null!==(t=null!=l?l:ev)&&void 0!==t?t:e}),eX=a.useContext(P.Z),eV=j()(!i&&ey,{[`${ej}-lg`]:"large"===eG,[`${ej}-sm`]:"small"===eG,[`${ej}-rtl`]:"rtl"===eu,[`${ej}-${eO}`]:eI,[`${ej}-in-form-item`]:ez},(0,Z.Z)(ej,eA,eL),e$,d,c,eP,eS,eZ,eN),[eK]=(0,v.Cn)("SelectLike",null==en?void 0:en.zIndex);return eC(ek(a.createElement(b.default,Object.assign({virtual:ex,disabled:null!=s?s:eX},eU,{dropdownMatchSelectWidth:eq,builtinPlacements:(0,_.Z)(J,eh),ref:t,prefixCls:ej,className:eV,listHeight:x,listItemHeight:ef,treeCheckable:p?a.createElement("span",{className:`${ej}-tree-checkbox-inner`}):p,treeLine:!!w,suffixIcon:eB,multiple:e_,placement:eD,removeIcon:eF,allowClear:!0===et?{clearIcon:eM}:et,switcherIcon:e=>a.createElement(z.Z,{prefixCls:eb,switcherIcon:f,treeNodeProps:e,showLine:w}),showTreeIcon:G,notFoundContent:n,getPopupContainer:S||ed,treeMotion:null,dropdownClassName:eE,dropdownStyle:Object.assign(Object.assign({},en),{zIndex:eK}),choiceTransitionName:(0,$.m)(ew,"",V),transitionName:(0,$.m)(ew,"slide-up",X),treeExpandAction:Y,tagRender:e_?ea:void 0,maxCount:eR,showCheckedStrategy:el,treeCheckStrictly:es}))))}),X=(0,S.Z)(G,"dropdownAlign",e=>(0,y.Z)(e,["visible"]));G.TreeNode=b.TreeNode,G.SHOW_ALL=b.SHOW_ALL,G.SHOW_PARENT=b.SHOW_PARENT,G.SHOW_CHILD=b.SHOW_CHILD,G._InternalPanelDoNotUseOrYouWillBeFired=X;var V=r(91259),K=r(276),Y=r(40240),J=r(59076),Q=r(58575),ee=r(12341),et=r(33265);let er=i().forwardRef(({properties:e,handlePropertyChange:t},r)=>{let[i,l]=(0,a.useState)([]);(0,a.useEffect)(()=>{e&&e.length>0?l(JSON.parse(e)):l([])},[e]);let s=(e,r,n)=>{let a=[...i];a[e][r]=n,l(a),t(a)},o=()=>{for(let e of i)if(!e.name||!e.value)return!1;return!0};(0,a.useImperativeHandle)(r,()=>({handleCheckSubmit:o}));let d=e=>{let r=i.filter((t,r)=>r!==e);l(r),t(r)};return(0,n.jsxs)("div",{children:[n.jsx("ul",{children:i?.map((e,t)=>n.jsxs("li",{style:{marginBottom:"16px"},children:[n.jsx(f.Z,{type:"text",placeholder:"属性名",style:{width:"200px"},value:e.name,onChange:e=>s(t,"name",e.target.value)})," \xa0 : \xa0",n.jsx(f.Z,{type:"text",placeholder:"属性值",style:{width:"200px"},value:e.value,onChange:e=>s(t,"value",e.target.value)}),n.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>d(t),style:{width:"80px",lineHeight:"32px",textAlign:"center",marginLeft:"16px"},children:"删除"})]},t))}),n.jsx(p.ZP,{onClick:()=>{l([...i,{name:"",value:""}])},children:"添加属性"})]})});er.displayName="PropertyPanel";let en=r(30124).Z.Group,ea=(0,et.default)(async()=>{},{loadableGenerated:{modules:["components/admin/product/productModal.jsx -> /src/components/admin/wangEditor.jsx"]},ssr:!1}),ei=({isOpen:e,onRequestClose:t,initialItem:r})=>{let[l,s]=(0,a.useState)(r||{}),[o,c]=(0,a.useState)(!1),u=i().useRef(null),[x,m]=(0,a.useState)([]),[w,j]=(0,a.useState)([]),b=(0,a.useRef)(null),[y,v]=(0,a.useState)([]),$=(e,t)=>{v(t);let r=t.join(",");s(t=>({...t,[e]:r}))},S=async()=>{try{let{code:e,msg:t,data:r}=await h.Z.get("/myapp/admin/category/list");0===e?m(r):d.ZP.error(t||"网络异常")}catch(e){}};(0,a.useEffect)(()=>{let e=setTimeout(()=>{r?.cover?.length>0?j(r?.cover?.split("#").map(e=>({success:!0,name:e,status:"done",url:process.env.NEXT_PUBLIC_BASE_URL+"/upload/img/"+e}))):j([]),r?.dimension?.length>0?v(r?.dimension?.split(",")):v([]),s(r||{}),u.current&&(u.current.scrollTop=0),S()},100);return()=>{clearTimeout(e)}},[r]);let Z=()=>{C()},C=async()=>{if(!l.title){d.ZP.error("请输入名称");return}if(!l.category){d.ZP.error("请选择分类");return}if(!l.cover){d.ZP.error("请上传图片");return}if(!b.current.handleCheckSubmit()){d.ZP.error("参数不能留空");return}try{c(!0);let e=l.id?"/myapp/admin/thing/update":"/myapp/admin/thing/create",r=new FormData;l.id&&r.append("id",l.id),r.append("title",l.title||""),r.append("category",l.category),r.append("summary",l.summary||""),r.append("price",l.price||""),r.append("dimension",l.dimension||""),r.append("cover",l.cover||""),r.append("description",l.description||""),r.append("seo_title",l.seo_title||""),r.append("seo_description",l.seo_description||""),r.append("seo_keywords",l.seo_keywords||""),r.append("properties",l.properties||""),r.append("status",l.status||"0");let{code:n,msg:a,data:i}=await h.Z.post(e,r);0===n?(d.ZP.success("操作成功"),t(!0)):d.ZP.error(a||"网络异常"),c(!1)}catch(e){c(!1)}},N=(e,t)=>{s(r=>({...r,[e]:t}))},P=(e,t)=>{s(r=>({...r,[e]:t}))},k=(e,t)=>{s(r=>({...r,[e]:t}))};return n.jsx(g.Z,{title:l.id?"编辑":"新增",centered:!0,open:e,onCancel:()=>t(!1),footer:null,width:1100,styles:{mask:{backdropFilter:"blur(10px)"}},children:n.jsx("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{ref:u,className:"max-h-[75vh] overflow-y-auto",children:[n.jsx(Y.Z,{title:"基本信息"}),(0,n.jsxs)("div",{className:"flex flex-col gap-6 px-2 py-2",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"名称",required:!0}),n.jsx(f.Z,{placeholder:"请输入产品名称",value:l.title,onChange:e=>N("title",e.target.value),maxLength:100,style:{width:300}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"分类",required:!0}),n.jsx(G,{dropdownStyle:{maxHeight:300,overflow:"auto",minWidth:300},style:{width:300},placeholder:"请选择",value:l.category,placement:"bottomLeft",allowClear:!0,fieldNames:{label:"title",value:"id",children:"children"},onChange:e=>k("category",e),treeData:x})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[n.jsx(J.Z,{title:"产品维度"}),n.jsx(en,{options:[{label:"推荐",value:"Recommend"},{label:"精选",value:"Feature"}],value:y,onChange:e=>$("dimension",e)})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[n.jsx(J.Z,{title:"价格"}),n.jsx(f.Z,{placeholder:"选填",value:l.price,onChange:e=>N("price",e.target.value),style:{width:300}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"摘要",required:!0}),n.jsx(ee.Z,{placeholder:"请输入产品摘要",autoSize:{minRows:3,maxRows:6},showCount:!0,maxLength:500,value:l.summary,onChange:e=>N("summary",e.target.value),style:{width:600}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 min-h-[100px]",children:[n.jsx(J.Z,{title:"图片",required:!0}),n.jsx(Q.Z,{maxCount:5,maxSize:5,accept:"image/*",imageList:w,onImageUploadChange:e=>{let t=e&&e.length>0?e.join("#"):null;s(e=>({...e,cover:t}))}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"是否启用"}),n.jsx(V.Z,{defaultValue:"0",placeholder:"请选择状态",value:l.status,style:{width:400},onChange:e=>P("status",e),options:[{value:"0",label:"是"},{value:"1",label:"否"}]})]})]}),n.jsx(K.Z,{}),n.jsx(Y.Z,{title:"产品详情"}),n.jsx("div",{className:"flex flex-col gap-4 px-2 py-2",children:n.jsx(ea,{htmlText:l.description,onHtmlResult:e=>{s(t=>({...t,description:e}))}})}),n.jsx(K.Z,{}),n.jsx(Y.Z,{title:"产品参数"}),n.jsx("div",{className:"flex flex-col gap-4 px-2 py-2",children:n.jsx(er,{ref:b,properties:l.properties,handlePropertyChange:e=>{s(t=>({...t,properties:JSON.stringify(e||[])}))}})}),n.jsx(K.Z,{}),n.jsx(Y.Z,{title:"SEO优化"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 px-2 py-2",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"SEO标题"}),n.jsx(f.Z,{placeholder:"请输入SEO标题",value:l.seo_title,onChange:e=>N("seo_title",e.target.value),style:{width:600}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"SEO关键词"}),n.jsx(f.Z,{placeholder:"请输入SEO关键词",value:l.seo_keywords,onChange:e=>N("seo_keywords",e.target.value),style:{width:600}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"SEO描述"}),n.jsx(ee.Z,{placeholder:"请输入SEO描述",autoSize:{minRows:3,maxRows:6},showCount:!0,maxLength:200,value:l.seo_description,onChange:e=>N("seo_description",e.target.value),style:{width:600}})]})]})]}),n.jsx(K.Z,{}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(p.ZP,{loading:o,type:"primary",onClick:()=>Z(),children:"提交"}),n.jsx(p.ZP,{onClick:()=>t(!1),children:"取消"})]})]})})})};var el=r(35047);function es(){(0,el.useRouter)();let[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)([]),[g,f]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),[b,y]=(0,a.useState)([]),[v,$]=(0,a.useState)(""),[S,Z]=(0,a.useState)(1),[C,N]=(0,a.useState)(10),[P,k]=(0,a.useState)(0),O=e=>{f(!0),j(e)},I=async e=>{try{let{code:t,data:n}=await h.Z.post("/myapp/admin/thing/delete",{ids:e.join(",")});0===t?(d.ZP.success("删除成功"),e.length===r.length&&S>1?Z(S-1):E(S,C)):d.ZP.error("删除失败")}catch(e){}},E=async(e,r)=>{try{t(!0);let{code:n,total:a,data:l}=await h.Z.get("/myapp/admin/thing/list",{params:{page:e,pageSize:r,keyword:v}});0===n?(i(l),k(a),Z(e),N(r)):d.ZP.error("数据获取失败"),t(!1)}catch(e){d.ZP.error("网络异常"),t(!1)}};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.Z,{spinning:e,tip:"",children:(0,n.jsxs)("div",{className:"bg-white px-4 py-4 flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(p.ZP,{type:"primary",onClick:()=>O({status:"0"}),children:"新增产品"}),n.jsx(o.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>I(b),children:n.jsx(p.ZP,{disabled:!b.length>0,children:"删除"})}),n.jsx(m.Z,{placeholder:"搜索产品",allowClear:!0,onSearch:(e,t,r)=>{Z(1),$(e||"")},style:{width:200,marginLeft:"auto"}})]}),(0,n.jsxs)("div",{className:"bg-white",children:[n.jsx(u.Z,{columns:[{title:"产品名称",dataIndex:"title",key:"title",width:"200px",textWrap:"word-break",ellipsis:!0},{title:"分类",dataIndex:"category_title",key:"category_title",width:"150px",textWrap:"word-break",ellipsis:!0},{title:"摘要",dataIndex:"summary",key:"summary",width:"280px",textWrap:"word-break",ellipsis:!0},{title:"是否启用",dataIndex:"status",key:"status",width:"90px",textWrap:"word-break",ellipsis:!0,render:e=>n.jsx("div",{children:"0"===e?"是":"否"})},{title:"创建时间",dataIndex:"create_time",key:"create_time",width:"150px",textWrap:"word-break",ellipsis:!0},{title:"操作",key:"action",fixed:"right",align:"center",width:"150px",textWrap:"word-break",ellipsis:!0,render:(e,t)=>(0,n.jsxs)(s.Z,{size:"middle",children:[n.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>O(t),children:"编辑"}),n.jsx(o.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>I([t.id]),children:n.jsx("a",{className:"text-adminPrimaryColor",children:"删除"})}),n.jsx(l.default,{className:"text-adminPrimaryColor",href:`/product/${t.id}`,target:"_blank",rel:"noopener noreferrer",children:"预览"})]})}],dataSource:r,size:"middle",rowSelection:{selectedRowKeys:b,onChange:e=>{y(e)}},rowKey:e=>e.id,pagination:!1,showSizeChanger:!1}),n.jsx("div",{className:"p-4",children:n.jsx(x.Z,{align:"end",current:S,pageSize:C,total:P,showTotal:e=>`共 ${e} 条`,onChange:(e,t)=>{Z(e),N(t)}})})]})]})}),n.jsx(ei,{isOpen:g,onRequestClose:e=>{f(!1),j(null),e&&E(S,C)},initialItem:w})]})}var eo=r(33325),ed=r(25842),ec=r(9078),ep=r(1901),eu=r(10183),ex=r(92790),em=r(5410),eh=r(86424),eg=r(92752),ef=r(35470),ew=r(53558),ej=r(64694),eb=r(40833);let ey=(e,t)=>{let{componentCls:r,borderRadiusSM:n,borderRadiusLG:a}=e,i="lg"===t?a:n;return{[`&-${t}`]:{[`${r}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${r}-handler-up`]:{borderStartEndRadius:i},[`${r}-handler-down`]:{borderEndEndRadius:i}}}},ev=e=>{let{componentCls:t,lineWidth:r,lineType:n,borderRadius:a,inputFontSizeSM:i,inputFontSizeLG:l,controlHeightLG:s,controlHeightSM:o,colorError:d,paddingInlineSM:c,paddingBlockSM:p,paddingBlockLG:u,paddingInlineLG:x,colorIcon:m,motionDurationMid:h,handleHoverColor:g,handleOpacity:f,paddingInline:w,paddingBlock:j,handleBg:b,handleActiveBg:y,colorTextDisabled:v,borderRadiusSM:$,borderRadiusLG:S,controlWidth:Z,handleBorderColor:C,filledHandleBg:N,lineHeightLG:P,calc:k}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,ew.Wf)(e)),(0,eh.ik)(e)),{display:"inline-block",width:Z,margin:0,padding:0,borderRadius:a}),(0,ef.qG)(e,{[`${t}-handler-wrap`]:{background:b,[`${t}-handler-down`]:{borderBlockStart:`${(0,H.unit)(r)} ${n} ${C}`}}})),(0,ef.H8)(e,{[`${t}-handler-wrap`]:{background:N,[`${t}-handler-down`]:{borderBlockStart:`${(0,H.unit)(r)} ${n} ${C}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:b}}})),(0,ef.vc)(e,{[`${t}-handler-wrap`]:{background:b,[`${t}-handler-down`]:{borderBlockStart:`${(0,H.unit)(r)} ${n} ${C}`}}})),(0,ef.Mu)(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:l,lineHeight:P,borderRadius:S,[`input${t}-input`]:{height:k(s).sub(k(r).mul(2)).equal(),padding:`${(0,H.unit)(u)} ${(0,H.unit)(x)}`}},"&-sm":{padding:0,fontSize:i,borderRadius:$,[`input${t}-input`]:{height:k(o).sub(k(r).mul(2)).equal(),padding:`${(0,H.unit)(p)} ${(0,H.unit)(c)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:d}}},"&-group":Object.assign(Object.assign(Object.assign({},(0,ew.Wf)(e)),(0,eh.s7)(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:S,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:$}}},(0,ef.ir)(e)),(0,ef.S5)(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},(0,ew.Wf)(e)),{width:"100%",padding:`${(0,H.unit)(j)} ${(0,H.unit)(w)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:a,outline:0,transition:`all ${h} linear`,appearance:"textfield",fontSize:"inherit"}),(0,eh.nz)(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:f,height:"100%",borderStartStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${h}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:m,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${(0,H.unit)(r)} ${n} ${C}`,transition:`all ${h} linear`,"&:active":{background:y},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:g}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},(0,ew.Ro)()),{color:m,transition:`all ${h} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:a},[`${t}-handler-down`]:{borderEndEndRadius:a}},ey(e,"lg")),ey(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:v}})}]},e$=e=>{let{componentCls:t,paddingBlock:r,paddingInline:n,inputAffixPadding:a,controlWidth:i,borderRadiusLG:l,borderRadiusSM:s,paddingInlineLG:o,paddingInlineSM:d,paddingBlockLG:c,paddingBlockSM:p,motionDurationMid:u}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${(0,H.unit)(r)} 0`}},(0,eh.ik)(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:i,padding:0,paddingInlineStart:n,"&-lg":{borderRadius:l,paddingInlineStart:o,[`input${t}-input`]:{padding:`${(0,H.unit)(c)} 0`}},"&-sm":{borderRadius:s,paddingInlineStart:d,[`input${t}-input`]:{padding:`${(0,H.unit)(p)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:a},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:n,marginInlineStart:a,transition:`margin ${u}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(n).equal()}})}},eS=(0,F.I$)("InputNumber",e=>{let t=(0,B.mergeToken)(e,(0,eg.e)(e));return[ev(t),e$(t),(0,ej.c)(t)]},e=>{var t;let r=null!==(t=e.handleVisible)&&void 0!==t?t:"auto",n=e.controlHeightSM-2*e.lineWidth;return Object.assign(Object.assign({},(0,eg.T)(e)),{controlWidth:90,handleWidth:n,handleFontSize:e.fontSize/2,handleVisible:r,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new eb.FastColor(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:!0===r?1:0,handleVisibleWidth:!0===r?n:0})},{unitless:{handleOpacity:!0}});var eZ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};let eC=a.forwardRef((e,t)=>{let{getPrefixCls:r,direction:n}=a.useContext(C.E_),i=a.useRef(null);a.useImperativeHandle(t,()=>i.current);let{className:l,rootClassName:s,size:o,disabled:d,prefixCls:c,addonBefore:p,addonAfter:u,prefix:x,suffix:m,bordered:h,readOnly:g,status:f,controls:w,variant:b}=e,y=eZ(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),v=r("input-number",c),$=(0,k.Z)(v),[S,N,_]=eS(v,$),{compactSize:R,compactItemClassnames:W}=(0,T.ri)(v,n),q=a.createElement(ep.Z,{className:`${v}-handler-up-inner`}),L=a.createElement(ec.Z,{className:`${v}-handler-down-inner`});"object"==typeof w&&(q=void 0===w.upIcon?q:a.createElement("span",{className:`${v}-handler-up-inner`},w.upIcon),L=void 0===w.downIcon?L:a.createElement("span",{className:`${v}-handler-down-inner`},w.downIcon));let{hasFeedback:z,status:H,isFormItemInput:A,feedbackIcon:B}=a.useContext(I.aM),F=(0,Z.F)(H,f),M=(0,O.Z)(e=>{var t;return null!==(t=null!=o?o:R)&&void 0!==t?t:e}),U=a.useContext(P.Z),D=null!=d?d:U,[G,X]=(0,E.Z)("inputNumber",b,h),V=z&&a.createElement(a.Fragment,null,B),K=j()({[`${v}-lg`]:"large"===M,[`${v}-sm`]:"small"===M,[`${v}-rtl`]:"rtl"===n,[`${v}-in-form-item`]:A},N),Y=`${v}-group`;return S(a.createElement(eu.default,Object.assign({ref:i,disabled:D,className:j()(_,$,l,s,W),upHandler:q,downHandler:L,prefixCls:v,readOnly:g,controls:"boolean"==typeof w?w:void 0,prefix:x,suffix:V||m,addonBefore:p&&a.createElement(ex.Z,{form:!0,space:!0},p),addonAfter:u&&a.createElement(ex.Z,{form:!0,space:!0},u),classNames:{input:K,variant:j()({[`${v}-${G}`]:X},(0,Z.Z)(v,F,z)),affixWrapper:j()({[`${v}-affix-wrapper-sm`]:"small"===M,[`${v}-affix-wrapper-lg`]:"large"===M,[`${v}-affix-wrapper-rtl`]:"rtl"===n,[`${v}-affix-wrapper-without-controls`]:!1===w||D},N),wrapper:j()({[`${Y}-rtl`]:"rtl"===n},N),groupWrapper:j()({[`${v}-group-wrapper-sm`]:"small"===M,[`${v}-group-wrapper-lg`]:"large"===M,[`${v}-group-wrapper-rtl`]:"rtl"===n,[`${v}-group-wrapper-${G}`]:X},(0,Z.Z)(`${v}-group-wrapper`,F,z),N)}},y)))});eC._InternalPanelDoNotUseOrYouWillBeFired=e=>a.createElement(em.ZP,{theme:{components:{InputNumber:{handleVisible:!0}}}},a.createElement(eC,Object.assign({},e)));let eN=({isOpen:e,onRequestClose:t,initialItem:r})=>{let[i,l]=(0,a.useState)(r||{}),[s,o]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l(r||{}),r?.cover?.length>0?o(r?.cover?.split("#").map(e=>({success:!0,name:e,status:"done",url:process.env.NEXT_PUBLIC_BASE_URL+"/upload/img/"+e}))):o([])},[r]);let m=(e,t)=>{l(r=>({...r,[e]:t}))},w=async()=>{if(!i.title){d.ZP.error("请输入分类名称");return}if(!i.cover){d.ZP.error("请上传封面图");return}try{x(!0);let e=i.id?"/myapp/admin/category/update":"/myapp/admin/category/create",r=new FormData;i.id&&r.append("id",i.id),i.cover&&r.append("cover",i.cover),r.append("pid",i.pid),r.append("title",i.title||""),r.append("sort",i.sort||0);let{code:n,msg:a,data:l}=await h.Z.post(e,r);0===n?(d.ZP.success("操作成功"),t(!0)):d.ZP.error(a||"网络异常"),x(!1)}catch(e){x(!1)}};return n.jsx(g.Z,{title:i.id?"编辑分类":"新增分类",centered:!0,open:e,onCancel:()=>t(!1),footer:null,width:600,children:n.jsx(c.Z,{spinning:u,tip:"",children:n.jsx("div",{className:"flex flex-col",children:n.jsx("div",{className:"",children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4 pt-4 pb-0 overflow-y-auto max-h-[70vh]",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"分类名称",required:!0}),n.jsx(f.Z,{placeholder:"请输入分类名称",value:i.title,onChange:e=>m("title",e.target.value),style:{width:400}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"封面图",required:!0}),n.jsx(Q.Z,{maxCount:1,maxSize:2,accept:"image/*",imageList:s,onImageUploadChange:e=>{let t=e&&e.length>0?e.join("#"):null;l(e=>({...e,cover:t}))}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[n.jsx(J.Z,{title:"排序",required:!0}),n.jsx(eC,{placeholder:"请输入顺序号",value:i.sort,onChange:e=>m("sort",e),style:{width:400}})]})]}),n.jsx(K.Z,{}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 justify-start",children:[n.jsx(p.ZP,{type:"primary",onClick:w,children:"提交"}),n.jsx(p.ZP,{onClick:()=>t(!1),children:"取消"})]})]})})})})})};function eP(){(0,ed.v9)(e=>e.adminSetting),(0,ed.I0)();let[e,t]=(0,a.useState)(!1),r=async()=>{try{t(!0);let{code:e,data:r}=await h.Z.get("/myapp/admin/category/list");0===e?l(r):d.ZP.error("数据获取失败"),t(!1)}catch(e){}},[i,l]=(0,a.useState)([]),[x,m]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),w=e=>{m(!0),f(e)},j=async e=>{try{let{code:t,data:n}=await h.Z.post("/myapp/admin/category/delete",{id:e.id});0===t?(d.ZP.success("删除成功"),r()):d.ZP.error("删除失败")}catch(e){}};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.Z,{spinning:e,tip:"",children:(0,n.jsxs)("div",{className:"bg-white px-4 py-4 flex flex-col gap-4",children:[n.jsx("div",{className:"flex flex-row gap-4",children:n.jsx(p.ZP,{type:"primary",onClick:()=>w({sort:0,pid:-1}),children:"新增分类"})}),n.jsx(u.Z,{columns:[{title:"分类名称",dataIndex:"title",key:"title"},{title:"排序",dataIndex:"sort",key:"sort"},{title:"操作",key:"action",align:"left",width:"260px",render:(e,t)=>(0,n.jsxs)(s.Z,{size:"middle",children:[n.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>w(t),children:"编辑"}),-1===t.pid?n.jsx("a",{className:"text-adminPrimaryColor",onClick:()=>w({sort:0,pid:t.id}),children:"添加子分类"}):null,n.jsx(o.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>j(t),children:n.jsx("a",{className:"text-adminPrimaryColor",children:"删除"})})]})}],dataSource:i,size:"middle",rowKey:e=>e.id,pagination:!1})]})}),n.jsx(eN,{isOpen:x,onRequestClose:e=>{m(!1),f(null),e&&r()},initialItem:g})]})}function ek(){let e=[{key:"1",label:"产品列表",children:n.jsx(es,{})},{key:"2",label:"产品分类",children:n.jsx(eP,{})}];return n.jsx(n.Fragment,{children:n.jsx("div",{className:"bg-gray-100 px-4 py-4",children:n.jsx("div",{className:"",children:n.jsx(eo.Z,{indicator:{size:e=>24,align:"center"},tabBarStyle:{paddingLeft:"20px",outline:"none",fontWeight:"400"},className:"bg-white custom-tab",defaultActiveKey:"1",items:e,onChange:e=>{}})})})})}},59076:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(10326);r(17577);let a=({title:e,required:t,labelWidth:r=80})=>(0,n.jsxs)("span",{className:"text-[14px] text-[#777] h-[30px] leading-[30px] flex flex-row items-center",style:{width:`${r}px`},children:[(0,n.jsxs)("div",{children:[e," "]}),n.jsx("div",{className:"flex flex-col items-center mx-1",children:t?n.jsx("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})},58575:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(10326),a=r(17577),i=r(72380),l=r(36498),s=r(4324),o=r(20797);let d=e=>new Promise((t,r)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>r(e)}),c=({maxCount:e,maxSize:t,accept:r,imageList:c,onImageUploadChange:p})=>{let[u,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(c),[w,j]=(0,a.useState)("");(0,a.useEffect)(()=>{f(c),localStorage.getItem("admintoken")&&j(localStorage.getItem("admintoken"))},[c]);let b=async e=>{e.url||e.preview||(e.preview=await d(e.originFileObj)),h(e.url||e.preview),x(!0)},y=(0,n.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[n.jsx(i.Z,{}),n.jsx("div",{style:{marginTop:8}})]}),v={name:"my-file",action:process.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadImg",headers:{admintoken:w}};return n.jsx(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:" min-h-[102px]",children:[n.jsx(s.Z,{accept:r,listType:"picture-card",fileList:g,onPreview:b,onChange:({file:e,fileList:t})=>{f(t),"error"===e.status&&l.ZP.error("上传失败");let r=[];t.forEach(e=>{e.success&&r.push(e.name),e.response&&(0===e.response.code?r.push(e.response.data):1===e.response.code&&(l.ZP.error("上传失败："+e.response.msg),e.status="error"))}),p(r)},maxCount:e,...v,children:g?.length>=e?null:y}),m&&n.jsx(o.Z,{wrapperStyle:{display:"none"},preview:{visible:u,onVisibleChange:e=>x(e),afterOpenChange:e=>!e&&h("")},src:m})]}),(0,n.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",t,"MB以内，最多",e,"张图片"]})]})})}},40240:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(10326);r(17577);let a=({title:e})=>n.jsx("div",{className:"font-bold text-[14px] px-2 my-2",children:e})},70414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(68570).createProxy)(String.raw`/app/src/app/(admin)/admin/products/page.jsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[5819,555,280,9921,8365,6498,9376,6742,5899,6039,5782,7832,6077,4605,2688,8147],()=>r(62570));module.exports=n})();