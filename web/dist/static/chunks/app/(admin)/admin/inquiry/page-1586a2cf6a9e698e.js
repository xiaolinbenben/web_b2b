(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5635],{5869:function(e,t,a){Promise.resolve().then(a.bind(a,91052))},91052:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var i=a(57437),r=a(2265),s=a(34755),n=a(93142),l=a(27502),d=a(54534),c=a(48651),o=a(11679),p=a(44434),m=a(68575),x=a(30245);function u(){(0,m.v9)(e=>e.adminSetting),(0,m.I0)();let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)([]),[u,h]=(0,r.useState)(1),[g,w]=(0,r.useState)(10),[y,f]=(0,r.useState)(0),k=async(e,a)=>{try{t(!0);let{code:i,total:r,data:n}=await x.Z.get("/myapp/admin/inquiry/list",{params:{page:e,pageSize:a}});0===i?(s(n),f(r),h(e),w(a)):d.ZP.error("数据获取失败"),t(!1)}catch(e){d.ZP.error("网络异常"),t(!1)}};(0,r.useEffect)(()=>{k(u,g)},[]);let j=async e=>{try{let{code:t,data:i}=await x.Z.post("/myapp/admin/inquiry/delete",{ids:e.id+""});0===t?(d.ZP.success("删除成功"),1===a.length&&u>1?k(u-1,g):k(u,g)):d.ZP.error("删除失败")}catch(e){}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"bg-white",children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{spinning:e,tip:"",children:(0,i.jsxs)("div",{className:" px-4 py-4 flex flex-col gap-4",children:[(0,i.jsx)("div",{className:"flex flex-row gap-4"}),(0,i.jsx)(o.Z,{columns:[{title:"客户姓名",dataIndex:"name",key:"name",width:"120px",textWrap:"word-break",ellipsis:!0},{title:"客户电话",dataIndex:"tel",key:"tel",width:"120px",textWrap:"word-break",ellipsis:!0},{title:"Email",dataIndex:"email",key:"email",width:"150px",textWrap:"word-break",ellipsis:!0},{title:"消息内容",dataIndex:"message",key:"message",width:"200px",textWrap:"word-break"},{title:"所属IP",dataIndex:"ip",key:"ip",width:"120px",textWrap:"word-break",ellipsis:!0},{title:"时间",dataIndex:"create_time",key:"create_time",width:"150px",textWrap:"word-break",ellipsis:!0},{title:"操作",key:"action",align:"center",width:"120px",textWrap:"word-break",ellipsis:!0,render:(e,t)=>(0,i.jsx)(n.Z,{size:"middle",children:(0,i.jsx)(l.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>j(t),children:(0,i.jsx)("a",{className:"text-adminPrimaryColor",children:"删除"})})})}],dataSource:a,size:"middle",rowKey:e=>e.id,pagination:!1,className:""}),(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)(p.Z,{align:"end",current:u,pageSize:g,total:y,showTotal:e=>"共 ".concat(e," 条"),onChange:(e,t)=>{k(e,t)}})})]})})})})})}function h(){let e=[{key:"1",label:"询盘列表",children:(0,i.jsx)(u,{})}];return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"bg-gray-100 px-4 py-4",children:(0,i.jsx)("div",{className:"",children:(0,i.jsx)(s.Z,{indicator:{size:e=>24,align:"center"},tabBarStyle:{paddingLeft:"20px",outline:"none",fontWeight:"400"},className:"bg-white custom-tab",defaultActiveKey:"1",items:e,onChange:e=>{}})})})})}},30245:function(e,t,a){"use strict";var i=a(83464);let r="https://shop.beisi.tech".replace(/\/$/,""),s=i.Z.create({baseURL:r||void 0,timeout:15e3,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let t=localStorage.getItem("admintoken");e.headers.ADMINTOKEN=t||""}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e.data,e=>{let{response:t}=e;return t?((401===t.status||403===t.status)&&(localStorage.removeItem("admintoken"),localStorage.removeItem("username"),window.location.href="/adminLogin"),Promise.reject(t.data)):Promise.reject(e)}),t.Z=s}},function(e){e.O(0,[3718,3464,2601,6382,4534,114,5821,1102,8575,8696,3705,2631,2971,2117,1744],function(){return e(e.s=5869)}),_N_E=e.O()}]);