(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3288],{66484:function(e,t,n){Promise.resolve().then(n.bind(n,328))},328:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a=n(57437),i=n(2265),s=n(34755),l=n(93142),r=n(27502),c=n(54534),d=n(48651),o=n(79525),x=n(11679),h=n(44434),u=n(68575),m=n(56771),p=n(30245),g=n(19697);function j(){(0,u.v9)(e=>e.adminSetting),(0,u.I0)();let[e,t]=(0,i.useState)([]),[n,s]=(0,i.useState)(!1),[j,y]=(0,i.useState)([]),[f,w]=(0,i.useState)(""),[S,Z]=(0,i.useState)(1),[k,C]=(0,i.useState)(10),[N,b]=(0,i.useState)(0),v=async(e,n)=>{try{s(!0);let{code:a,total:i,data:l}=await p.Z.get("/myapp/admin/news/list",{params:{page:e,pageSize:n,keyword:f}});0===a?(t(l),b(i),Z(e),C(n)):c.ZP.error("数据获取失败"),s(!1)}catch(e){}};(0,i.useEffect)(()=>{v(S,k)},[S,f]);let[P,_]=(0,i.useState)(!1),[z,I]=(0,i.useState)(null),T=e=>{_(!0),I(e)},E=async t=>{try{let{code:n,data:a}=await p.Z.post("/myapp/admin/news/delete",{ids:t.join(",")});0===n?(c.ZP.success("删除成功"),t.length===e.length&&S>1?Z(S-1):v(S,k)):c.ZP.error("删除失败")}catch(e){}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-white",children:(0,a.jsx)("div",{children:(0,a.jsx)(d.Z,{spinning:n,tip:"",children:(0,a.jsxs)("div",{className:" px-4 py-4 flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(o.ZP,{type:"primary",onClick:()=>T({sort:0}),children:"新增"}),(0,a.jsx)(r.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>E(j),children:(0,a.jsx)(o.ZP,{disabled:!j.length>0,children:"删除"})}),(0,a.jsx)(m.Z,{placeholder:"搜索",allowClear:!0,onSearch:(e,t,n)=>{Z(1),w(e||"")},style:{width:200,marginLeft:"auto"}})]}),(0,a.jsx)(x.Z,{columns:[{title:"标题",dataIndex:"title",key:"title",width:"320px",textWrap:"word-break"},{title:"来源",dataIndex:"source",key:"source"},{title:"创建时间",dataIndex:"create_time",key:"create_time"},{title:"操作",key:"action",align:"center",render:(e,t)=>(0,a.jsxs)(l.Z,{size:"middle",children:[(0,a.jsx)("a",{className:"text-adminPrimaryColor",onClick:()=>T(t),children:"编辑"}),(0,a.jsx)(r.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>E([t.id]),children:(0,a.jsx)("a",{className:"text-adminPrimaryColor",children:"删除"})})]})}],dataSource:e,size:"middle",rowSelection:{selectedRowKeys:j,onChange:e=>{y(e)}},rowKey:e=>e.id,pagination:!1,scroll:{x:"max-content"},showSizeChanger:!1}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(h.Z,{align:"end",current:S,pageSize:k,total:N,showTotal:e=>"共 ".concat(e," 条"),onChange:(e,t)=>{Z(e),C(t)}})})]})})})}),(0,a.jsx)(g.Z,{isOpen:P,onRequestClose:e=>{_(!1),I(null),e&&v(S,k)},initialItem:z})]})}function y(){let e=[{key:"1",label:"新闻列表",children:(0,a.jsx)(j,{})}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"bg-gray-100 px-4 py-4",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)(s.Z,{indicator:{size:e=>24,align:"center"},tabBarStyle:{paddingLeft:"20px",outline:"none",fontWeight:"400"},className:"bg-white custom-tab",defaultActiveKey:"1",items:e,onChange:e=>{}})})})})}}},function(e){e.O(0,[3718,3464,2601,6382,4534,114,5821,1102,8575,8696,6836,3705,6399,2631,3736,1581,9697,2971,2117,1744],function(){return e(e.s=66484)}),_N_E=e.O()}]);