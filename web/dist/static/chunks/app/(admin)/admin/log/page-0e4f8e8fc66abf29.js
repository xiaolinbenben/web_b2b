(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5925],{59008:function(e,t,a){Promise.resolve().then(a.bind(a,90094))},90094:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var i=a(57437),n=a(2265),r=a(34755),s=a(93142),d=a(27502),l=a(54534),c=a(48651),o=a(79525),x=a(11679),h=a(44434),p=a(68575),m=a(30245);function u(){(0,p.v9)(e=>e.adminSetting),(0,p.I0)();let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!1),[u,g]=(0,n.useState)([]),[y,j]=(0,n.useState)(""),[f,w]=(0,n.useState)(1),[k,Z]=(0,n.useState)(10),[_,S]=(0,n.useState)(0),v=async(e,a)=>{try{r(!0);let{code:i,total:n,data:s}=await m.Z.get("/myapp/admin/opLog/list",{params:{page:e,pageSize:a,keyword:y}});0===i?(t(s),S(n),w(e),Z(a)):l.ZP.error("数据获取失败"),r(!1)}catch(e){}};(0,n.useEffect)(()=>{v(f,k)},[f,y]);let[b,N]=(0,n.useState)(null),C=async t=>{try{let{code:a,data:i}=await m.Z.post("/myapp/admin/opLog/delete",{ids:t.join(",")});0===a?(l.ZP.success("删除成功"),t.length===e.length&&f>1?w(f-1):v(f,k)):l.ZP.error("删除失败")}catch(e){}},I=async()=>{try{let{code:e,data:t}=await m.Z.post("/myapp/admin/opLog/deleteAll");0===e?(l.ZP.success("删除成功"),g([]),v(1,k)):l.ZP.error("删除失败")}catch(e){}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"bg-white",children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{spinning:a,tip:"",children:(0,i.jsxs)("div",{className:" px-4 py-4 flex flex-col gap-4",children:[(0,i.jsx)("div",{className:"flex flex-row gap-4",children:(0,i.jsx)(d.Z,{title:"确定清空？",okText:"确定",cancelText:"取消",onConfirm:()=>I(),children:(0,i.jsx)(o.ZP,{children:"清空"})})}),(0,i.jsx)(x.Z,{columns:[{title:"ID",dataIndex:"id",key:"id",width:"100px",textWrap:"word-break"},{title:"IP",dataIndex:"re_ip",key:"re_ip",width:"120px",textWrap:"word-break",render:e=>(0,i.jsx)("div",{children:e})},{title:"请求方式",dataIndex:"re_method",key:"re_method",width:"90px",textWrap:"word-break",render:e=>(0,i.jsx)("div",{children:e})},{title:"api接口",dataIndex:"re_url",key:"re_url",width:"240px",textWrap:"word-break",render:e=>(0,i.jsx)("div",{children:e})},{title:"耗时(ms)",dataIndex:"access_time",key:"access_time"},{title:"创建时间",dataIndex:"re_time",key:"re_time"},{title:"操作",key:"action",align:"center",render:(e,t)=>(0,i.jsx)(s.Z,{size:"middle",children:(0,i.jsx)(d.Z,{title:"确定删除？",okText:"确定",cancelText:"取消",onConfirm:()=>C([t.id]),children:(0,i.jsx)("a",{className:"text-adminPrimaryColor",children:"删除"})})})}],dataSource:e,size:"middle",rowKey:e=>e.id,pagination:!1,scroll:{x:"max-content"},showSizeChanger:!1}),(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)(h.Z,{align:"end",current:f,pageSize:k,showSizeChanger:!1,total:_,showTotal:e=>"共 ".concat(e," 条"),onChange:(e,t)=>{w(e),Z(t)}})})]})})})})})}function g(){let e=[{key:"1",label:"日志管理",children:(0,i.jsx)(u,{})}];return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"bg-gray-100 px-4 py-4",children:(0,i.jsx)("div",{className:"",children:(0,i.jsx)(r.Z,{indicator:{size:e=>24,align:"center"},tabBarStyle:{paddingLeft:"20px",outline:"none",fontWeight:"400"},className:"bg-white custom-tab",defaultActiveKey:"1",items:e,onChange:e=>{}})})})})}a(19697)}},function(e){e.O(0,[3718,3464,2601,6382,4534,114,5821,1102,8575,8696,6836,3705,6399,2631,3736,1581,9697,2971,2117,1744],function(){return e(e.s=59008)}),_N_E=e.O()}]);