(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7320],{57320:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n(57437);n(42574);var l=n(2265),r=n(64366),a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,l,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(e){l={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return a}function u(e){var t=e.defaultContent,n=void 0===t?[]:t,o=e.onCreated,u=e.defaultHtml,d=void 0===u?"":u,c=e.value,s=void 0===c?"":c,f=e.onChange,m=e.defaultConfig,v=void 0===m?{}:m,p=e.mode,h=void 0===p?"default":p,y=e.style,g=e.className,C=(0,l.useRef)(null),N=i((0,l.useState)(null),2),x=N[0],E=N[1],F=i((0,l.useState)(""),2),b=F[0],S=F[1],k=function(e){o&&o(e);var t=v.onCreated;t&&t(e)},w=function(e){S(e.getHtml()),f&&f(e);var t=v.onChange;t&&t(e)},j=function(e){var t=v.onDestroyed;E(null),t&&t(e)};return(0,l.useEffect)(function(){if(null!=x&&s!==b)try{x.setHtml(s)}catch(e){console.error(e)}},[s]),(0,l.useEffect)(function(){var e;null==C.current||null!=x||(null===(e=C.current)||void 0===e?void 0:e.getAttribute("data-w-e-textarea"))||E((0,r.Jh)({selector:C.current,config:a(a({},v),{onCreated:k,onChange:w,onDestroyed:j}),content:n,html:d||s,mode:h}))},[x]),l.createElement("div",{style:void 0===y?{}:y,ref:C,className:g})}function d(e){var t=e.editor,n=e.defaultConfig,o=void 0===n?{}:n,a=e.mode,i=void 0===a?"default":a,u=e.style,d=e.className,c=(0,l.useRef)(null);return(0,l.useEffect)(function(){null!=c.current&&null!=t&&r.k5({editor:t,selector:c.current,config:o,mode:i})},[t]),l.createElement("div",{style:void 0===u?{}:u,ref:c,className:d})}var c=n(54534),s=function(e){let{htmlText:t,onHtmlResult:n}=e,[r,a]=(0,l.useState)(null),[i,s]=(0,l.useState)(t||"");(0,l.useEffect)(()=>{s(t||"")},[t]);let f=e=>{s(e),n(e)},m={placeholder:"请输入产品详情...",MENU_CONF:{}};return m.MENU_CONF.uploadImage={server:"https://shop.beisi.tech/myapp/admin/cdn/uploadFile",fieldName:"my-file",maxFileSize:10485760,maxNumberOfFiles:1,allowedFileTypes:["image/*"],meta:{},metaWithUrl:!1,headers:{Accept:"application/json",admintoken:localStorage.getItem("admintoken")||""},withCredentials:!1,timeout:15e3,onSuccess(e,t){},onFailed(e,t){t&&c.ZP.error(t.message||"上传失败")},onError(e,t,n){alert("上传出错")}},m.MENU_CONF.uploadVideo={server:"https://shop.beisi.tech/myapp/admin/cdn/uploadFile",fieldName:"my-file",maxFileSize:524288e3,maxNumberOfFiles:1,allowedFileTypes:["video/*"],meta:{},metaWithUrl:!1,headers:{Accept:"application/json",admintoken:localStorage.getItem("admintoken")||""},withCredentials:!1,timeout:9e4,onSuccess(e,t){},onFailed(e,t){t&&c.ZP.error(t.message||"上传失败")},onError(e,t,n){alert("上传出错")}},(0,l.useEffect)(()=>()=>{null!=r&&(r.destroy(),a(null))},[r]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:{border:"1px solid #ccc",zIndex:100},onClick:()=>r.focus(),children:[(0,o.jsx)(d,{editor:r,defaultConfig:{},mode:"default",style:{borderBottom:"1px solid #ccc"}}),(0,o.jsx)(u,{defaultConfig:m,value:i,onCreated:a,onChange:e=>f(e.getHtml()),mode:"default",style:{minHeight:"500px",overflowY:"hidden"}})]})})}},42574:function(){}}]);