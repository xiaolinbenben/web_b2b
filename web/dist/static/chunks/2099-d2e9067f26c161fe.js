"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2099],{22099:function(e,s,t){t.d(s,{Z:function(){return b}});var a=t(57437),l=t(96257),i=t(2265),n=t(54534),r=t(48651),o=t(29967),c=t(16836),d=t(79525);t(89076);var p=t(69539),u=t(30245),x=t(50434),m=t(96473),h=t(51145),g=t(66789),v=t(40257);let _=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)});var j=e=>{let{maxCount:s,maxSize:t,accept:l,imageList:r,onImageUploadChange:o}=e,[c,d]=(0,i.useState)(!1),[p,u]=(0,i.useState)(""),[x,j]=(0,i.useState)(r),[f,w]=(0,i.useState)("");(0,i.useEffect)(()=>{j(r),localStorage.getItem("admintoken")&&w(localStorage.getItem("admintoken"))},[r]);let Z=async e=>{e.url||e.preview||(e.preview=await _(e.originFileObj)),u(e.url||e.preview),d(!0)},y=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("div",{style:{marginTop:8}})]}),b={name:"my-file",action:v.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadLogoImg",headers:{admintoken:f}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[(0,a.jsx)(h.Z,{accept:l,listType:"picture-card",fileList:x,onPreview:Z,onChange:e=>{let{file:s,fileList:t}=e;j(t),"error"===s.status&&n.ZP.error("上传失败");let a=[];t.forEach(e=>{e.success&&a.push(e.name),e.response&&(0===e.response.code?a.push(e.response.data):1===e.response.code&&(n.ZP.error("上传失败："+e.response.msg),e.status="error"))}),o(a)},maxCount:s,...b,children:(null==x?void 0:x.length)>=s?null:y}),p&&(0,a.jsx)(g.Z,{wrapperStyle:{display:"none"},preview:{visible:c,onVisibleChange:e=>d(e),afterOpenChange:e=>!e&&u("")},src:p})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",t,"MB以内，最多",s,"张图片"]})]})})},f=t(40257);let w=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)});var Z=e=>{let{maxCount:s,maxSize:t,accept:l,imageList:r,onImageUploadChange:o}=e,[c,d]=(0,i.useState)(!1),[p,u]=(0,i.useState)(""),[x,v]=(0,i.useState)(r),[_,j]=(0,i.useState)("");(0,i.useEffect)(()=>{v(r),localStorage.getItem("admintoken")&&j(localStorage.getItem("admintoken"))},[r]);let Z=async e=>{e.url||e.preview||(e.preview=await w(e.originFileObj)),u(e.url||e.preview),d(!0)},y=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("div",{style:{marginTop:8}})]}),b={name:"my-file",action:f.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadIcoImg",headers:{admintoken:_}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[(0,a.jsx)(h.Z,{accept:l,listType:"picture-card",fileList:x,onPreview:Z,onChange:e=>{let{file:s,fileList:t}=e;v(t),"error"===s.status&&n.ZP.error("上传失败");let a=[];t.forEach(e=>{e.success&&a.push(e.name),e.response&&(0===e.response.code?a.push(e.response.data):1===e.response.code&&(n.ZP.error("上传失败："+e.response.msg),e.status="error"))}),o(a)},maxCount:s,...b,children:(null==x?void 0:x.length)>=s?null:y}),p&&(0,a.jsx)(g.Z,{wrapperStyle:{display:"none"},preview:{visible:c,onVisibleChange:e=>d(e),afterOpenChange:e=>!e&&u("")},src:p})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",t,"MB以内，最多",s,"张图片"]})]})})},y=t(40257),b=()=>{let[e,s]=(0,i.useState)({}),[t,m]=(0,i.useState)(!1),[h,g]=(0,i.useState)([]),[v,_]=(0,i.useState)([]),f=async()=>{try{m(!0);let{code:e,msg:t,data:a}=await u.Z.get("/myapp/admin/basicSite/list");0===e?(s(a),w(a)):n.ZP.error(t||"网络异常"),m(!1)}catch(e){n.ZP.error("网络异常"),m(!1)}};(0,i.useEffect)(()=>{f()},[]);let w=e=>{var s,t,a,l;(null==e?void 0:null===(s=e.site_logo)||void 0===s?void 0:s.length)>0?g(null==e?void 0:null===(a=e.site_logo)||void 0===a?void 0:a.split("#").map(e=>({success:!0,name:e,status:"done",url:y.env.NEXT_PUBLIC_BASE_URL+"/upload/img/"+e}))):g([]),(null==e?void 0:null===(t=e.site_ico)||void 0===t?void 0:t.length)>0?_(null==e?void 0:null===(l=e.site_ico)||void 0===l?void 0:l.split("#").map(e=>({success:!0,name:e,status:"done",url:y.env.NEXT_PUBLIC_BASE_URL+"/upload/img/"+e}))):_([])},b=(e,t)=>{s(s=>({...s,[e]:t}))},N=(e,t)=>{s(s=>({...s,[e]:t}))},S=(e,t)=>{let a=e&&e.length>0?e.join("#"):null;s(e=>({...e,[t]:a}))},C=async()=>{try{let s=new FormData;s.append("status",e.status||"1"),s.append("site_name",e.site_name||""),s.append("site_nickname",e.site_nickname||""),s.append("site_logo",e.site_logo||""),s.append("site_ico",e.site_ico||""),s.append("site_address",e.site_address||""),s.append("site_copyright",e.site_copyright||""),s.append("site_code",e.site_code||""),s.append("site_gaid",e.site_gaid||""),s.append("site_switch_product",e.site_switch_product||"1"),s.append("site_switch_about",e.site_switch_about||"1"),s.append("site_switch_contact",e.site_switch_contact||"1"),s.append("site_switch_news",e.site_switch_news||"1"),s.append("site_switch_case",e.site_switch_case||"1"),s.append("site_switch_faq",e.site_switch_faq||"1"),s.append("site_switch_download",e.site_switch_download||"1");let{code:t,msg:a,data:l}=await u.Z.post("/myapp/admin/basicSite/update",s);0===t?(n.ZP.success("操作成功"),f()):n.ZP.error(a||"网络异常")}catch(e){}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Z,{spinning:t,children:(0,a.jsxs)("div",{className:"px-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 py-6",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,a.jsx)(l.Z,{title:"网站状态"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("status",e.target.value),value:e.status,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(l.Z,{title:"网站名称"}),(0,a.jsx)(c.Z,{placeholder:"请输入网站名称",value:e.site_name,onChange:e=>b("site_name",e.target.value),style:{width:300}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(l.Z,{title:"网站Logo"}),(0,a.jsx)(j,{maxCount:1,maxSize:2,accept:"image/png",imageList:h,onImageUploadChange:e=>S(e,"site_logo")})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(l.Z,{title:"ico图标"}),(0,a.jsx)(Z,{maxCount:1,maxSize:1,accept:"image/x-icon",imageList:v,onImageUploadChange:e=>S(e,"site_ico")})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(l.Z,{title:"网站网址"}),(0,a.jsx)(c.Z,{placeholder:"请输入网站网址",value:e.site_address,onChange:e=>b("site_address",e.target.value),style:{width:300}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(l.Z,{title:"谷歌gaId"}),(0,a.jsx)(c.Z,{placeholder:"请输入",value:e.site_gaid,onChange:e=>b("site_gaid",e.target.value),style:{width:300}})]})]}),(0,a.jsx)(x.Z,{title:"功能菜单"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 px-2  py-6",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"产品"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_product",e.target.value),value:e.site_switch_product,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"关于"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_about",e.target.value),value:e.site_switch_about,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"联系"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_contact",e.target.value),value:e.site_switch_contact,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"新闻"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_news",e.target.value),value:e.site_switch_news,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"案例"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_case",e.target.value),value:e.site_switch_case,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"下载"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_download",e.target.value),value:e.site_switch_download,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(l.Z,{title:"Faq"}),(0,a.jsx)(o.ZP.Group,{onChange:e=>N("site_switch_faq",e.target.value),value:e.site_switch_faq,options:[{value:"1",label:"开启"},{value:"2",label:"关闭"}]})]})]}),(0,a.jsx)(p.iz,{}),(0,a.jsx)("div",{className:"pb-6 flex flex-row gap-4 justify-start",children:(0,a.jsx)(d.ZP,{type:"primary",onClick:C,children:"提交"})})]})})})}},96257:function(e,s,t){var a=t(57437);t(2265),s.Z=e=>{let{title:s,required:t,labelWidth:l=80}=e;return(0,a.jsxs)("span",{className:"text-[14px] text-[#777] h-[30px] leading-[30px] flex flex-row items-center",style:{width:"".concat(l,"px")},children:[(0,a.jsxs)("div",{children:[s," "]}),(0,a.jsx)("div",{className:"flex flex-col items-center mx-1",children:t?(0,a.jsx)("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})}},50434:function(e,s,t){var a=t(57437);t(2265),s.Z=e=>{let{title:s,required:t}=e;return(0,a.jsxs)("span",{className:"bg-gray-100 text-[13px] w-full text-gray-700 px-3 h-[36px] leading-[36px] flex flex-row items-center",children:[(0,a.jsx)("div",{children:s}),(0,a.jsx)("div",{className:"flex flex-col items-center mx-1",children:t?(0,a.jsx)("span",{className:"text-red-500 font-bold text-[14px] ",children:"*"}):null})]})}},89076:function(e,s,t){var a=t(57437),l=t(2265),i=t(96473),n=t(54534),r=t(51145),o=t(66789),c=t(40257);let d=e=>new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)});s.Z=e=>{let{maxCount:s,maxSize:t,accept:p,imageList:u,onImageUploadChange:x}=e,[m,h]=(0,l.useState)(!1),[g,v]=(0,l.useState)(""),[_,j]=(0,l.useState)(u),[f,w]=(0,l.useState)("");(0,l.useEffect)(()=>{j(u),localStorage.getItem("admintoken")&&w(localStorage.getItem("admintoken"))},[u]);let Z=async e=>{e.url||e.preview||(e.preview=await d(e.originFileObj)),v(e.url||e.preview),h(!0)},y=(0,a.jsxs)("button",{style:{border:0,background:"none",display:"flex",alignItems:"center"},type:"button",children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)("div",{style:{marginTop:8}})]}),b={name:"my-file",action:c.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadImg",headers:{admintoken:f}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:" min-h-[102px]",children:[(0,a.jsx)(r.Z,{accept:p,listType:"picture-card",fileList:_,onPreview:Z,onChange:e=>{let{file:s,fileList:t}=e;j(t),"error"===s.status&&n.ZP.error("上传失败");let a=[];t.forEach(e=>{e.success&&a.push(e.name),e.response&&(0===e.response.code?a.push(e.response.data):1===e.response.code&&(n.ZP.error("上传失败："+e.response.msg),e.status="error"))}),x(a)},maxCount:s,...b,children:(null==_?void 0:_.length)>=s?null:y}),g&&(0,a.jsx)(o.Z,{wrapperStyle:{display:"none"},preview:{visible:m,onVisibleChange:e=>h(e),afterOpenChange:e=>!e&&v("")},src:g})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["图片大小",t,"MB以内，最多",s,"张图片"]})]})})}},30245:function(e,s,t){var a=t(83464),l=t(40257);let i=a.Z.create({baseURL:l.env.NEXT_PUBLIC_BASE_URL,timeout:15e3,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let s=localStorage.getItem("admintoken");e.headers.ADMINTOKEN=s||""}return e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e.data,e=>{let{response:s}=e;if(s){if(401===s.status||403===s.status){localStorage.removeItem("admintoken"),localStorage.removeItem("username");let e=l.env.NEXT_PUBLIC_BASE_PATH||"";window.location.href=e+"/adminLogin"}return Promise.reject(s.data)}return Promise.reject(e)}),s.Z=i}}]);