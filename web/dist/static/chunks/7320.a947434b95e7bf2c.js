(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7320],{57320:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var l=n(57437);n(42574);var o=n(2265),r=n(64366),a=function(){return(a=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var l,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(l=r.next()).done;)a.push(l.value)}catch(e){o={error:e}}finally{try{l&&!l.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(e){var t=e.defaultContent,n=void 0===t?[]:t,l=e.onCreated,u=e.defaultHtml,d=void 0===u?"":u,c=e.value,s=void 0===c?"":c,f=e.onChange,m=e.defaultConfig,v=void 0===m?{}:m,p=e.mode,h=void 0===p?"default":p,y=e.style,g=e.className,C=(0,o.useRef)(null),E=i((0,o.useState)(null),2),N=E[0],x=E[1],F=i((0,o.useState)(""),2),S=F[0],_=F[1],b=function(e){l&&l(e);var t=v.onCreated;t&&t(e)},k=function(e){_(e.getHtml()),f&&f(e);var t=v.onChange;t&&t(e)},w=function(e){var t=v.onDestroyed;x(null),t&&t(e)};return(0,o.useEffect)(function(){if(null!=N&&s!==S)try{N.setHtml(s)}catch(e){console.error(e)}},[s]),(0,o.useEffect)(function(){var e;null==C.current||null!=N||(null===(e=C.current)||void 0===e?void 0:e.getAttribute("data-w-e-textarea"))||x((0,r.Jh)({selector:C.current,config:a(a({},v),{onCreated:b,onChange:k,onDestroyed:w}),content:n,html:d||s,mode:h}))},[N]),o.createElement("div",{style:void 0===y?{}:y,ref:C,className:g})}function d(e){var t=e.editor,n=e.defaultConfig,l=void 0===n?{}:n,a=e.mode,i=void 0===a?"default":a,u=e.style,d=e.className,c=(0,o.useRef)(null);return(0,o.useEffect)(function(){null!=c.current&&null!=t&&r.k5({editor:t,selector:c.current,config:l,mode:i})},[t]),o.createElement("div",{style:void 0===u?{}:u,ref:c,className:d})}var c=n(54534),s=n(40257),f=function(e){let{htmlText:t,onHtmlResult:n}=e,[r,a]=(0,o.useState)(null),[i,f]=(0,o.useState)(t||"");(0,o.useEffect)(()=>{f(t||"")},[t]);let m=e=>{f(e),n(e)},v={placeholder:"请输入产品详情...",MENU_CONF:{}};return v.MENU_CONF.uploadImage={server:s.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadFile",fieldName:"my-file",maxFileSize:10485760,maxNumberOfFiles:1,allowedFileTypes:["image/*"],meta:{},metaWithUrl:!1,headers:{Accept:"application/json",admintoken:localStorage.getItem("admintoken")||""},withCredentials:!1,timeout:15e3,onSuccess(e,t){},onFailed(e,t){t&&c.ZP.error(t.message||"上传失败")},onError(e,t,n){alert("上传出错")}},v.MENU_CONF.uploadVideo={server:s.env.NEXT_PUBLIC_BASE_URL+"/myapp/admin/cdn/uploadFile",fieldName:"my-file",maxFileSize:524288e3,maxNumberOfFiles:1,allowedFileTypes:["video/*"],meta:{},metaWithUrl:!1,headers:{Accept:"application/json",admintoken:localStorage.getItem("admintoken")||""},withCredentials:!1,timeout:9e4,onSuccess(e,t){},onFailed(e,t){t&&c.ZP.error(t.message||"上传失败")},onError(e,t,n){alert("上传出错")}},(0,o.useEffect)(()=>()=>{null!=r&&(r.destroy(),a(null))},[r]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{style:{border:"1px solid #ccc",zIndex:100},onClick:()=>r.focus(),children:[(0,l.jsx)(d,{editor:r,defaultConfig:{},mode:"default",style:{borderBottom:"1px solid #ccc"}}),(0,l.jsx)(u,{defaultConfig:v,value:i,onCreated:a,onChange:e=>m(e.getHtml()),mode:"default",style:{minHeight:"500px",overflowY:"hidden"}})]})})}},42574:function(){}}]);